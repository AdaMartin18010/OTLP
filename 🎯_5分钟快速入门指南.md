# 🚀 OTLP项目5分钟快速入门指南

> **目标**: 让新用户在5分钟内运行起来并看到效果  
> **适用人群**: 开发者、架构师、DevOps工程师  
> **前置条件**: Docker已安装

---

## ⏱️ 第1分钟: 环境准备

### 克隆项目

```bash
# 克隆仓库（假设项目已发布）
git clone https://github.com/your-org/OTLP-Formal-Verification.git
cd OTLP-Formal-Verification

# 或者如果是本地项目
cd E:\_src\OTLP
```

### 检查Docker

```bash
# 确认Docker运行正常
docker --version
docker-compose --version

# 应该看到类似输出：
# Docker version 24.0.0
# docker-compose version 1.29.2
```

✅ **第1分钟完成！** 项目已准备好。

---

## ⏱️ 第2分钟: 启动环境

### 启动完整可观测性环境

```bash
# 启动Jaeger + OpenTelemetry Collector
docker-compose up -d

# 查看容器状态
docker-compose ps
```

**预期输出**:

```text
       Name                     Command               State                    Ports
--------------------------------------------------------------------------------------------------------
otel-collector       /otelcol-contrib --config ...   Up      0.0.0.0:4317->4317/tcp, 0.0.0.0:4318->4318/tcp
jaeger               /go/bin/all-in-one-linux         Up      0.0.0.0:16686->16686/tcp
```

### 验证服务可用

```bash
# 测试Collector健康状态
curl http://localhost:13133/

# 访问Jaeger UI
# 打开浏览器: http://localhost:16686
```

✅ **第2分钟完成！** 环境已启动。

---

## ⏱️ 第3分钟: 运行示例

### 选择示例（3选1）

#### 选项A: Go电商订单追踪示例 ⭐ 推荐

```bash
# 进入示例目录
cd examples/e-commerce-order-tracking

# 安装依赖
go mod download

# 运行示例
go run main.go
```

**预期输出**:

```text
🛒 E-commerce Order Tracking Example Started
📊 Sending order processing traces to OTLP Collector...
🔗 Connect to http://localhost:16686 to view traces (Jaeger UI)

Processing Order 1: ID=ORDER-2024-000001, Amount=$125.50, User=gold
Processing Order 2: ID=ORDER-2024-000002, Amount=$45.99, User=silver
Processing Order 3: ID=ORDER-2024-000003, Amount=$299.00, User=platinum
...
✅ All orders processed successfully!
```

#### 选项B: Java金融交易追踪示例

```bash
cd examples/fintech-transaction-tracking

# 运行（Maven会自动下载依赖）
mvn spring-boot:run

# 发送测试交易
curl -X POST http://localhost:8080/api/transactions \
  -H "Content-Type: application/json" \
  -d '{"transactionId": "TXN-001", "amount": 99.99, ...}'
```

#### 选项C: 最简单的测试

```bash
# 使用curl直接发送OTLP数据
curl -X POST http://localhost:4318/v1/traces \
  -H "Content-Type: application/json" \
  -d @examples/test-data/sample-trace.json
```

✅ **第3分钟完成！** 示例正在运行。

---

## ⏱️ 第4分钟: 查看追踪数据

### 打开Jaeger UI

1. **访问**: <http://localhost:16686>

2. **选择服务**:
   - Go示例: 选择 `order-service`
   - Java示例: 选择 `fintech-transaction-service`

3. **查找Traces**:
   - 点击 "Find Traces"
   - 查看Trace列表

### 查看Trace详情

点击任意Trace，你会看到：

```text
process_order [201ms] ⭐
  ├─ validate_order [50ms]
  ├─ process_payment [100ms]
  │   └─ call_payment_gateway [80ms]
  ├─ update_inventory [30ms]
  └─ send_notification [20ms]
```

### 查看Span属性

在Span详情中，你会看到：

**标准属性**:

- `http.method: POST`
- `http.status_code: 200`
- `service.name: order-service`

**自定义属性**:

- `myshop.order.id: ORDER-2024-000001`
- `myshop.user.tier: gold`
- `myshop.order.total_amount: 125.50`

✅ **第4分钟完成！** 已看到完整追踪数据。

---

## ⏱️ 第5分钟: 理解数据流

### 查看可视化流程图

打开项目文档查看完整数据流：

```bash
# 在VS Code或其他编辑器中打开
code 📊_OTLP数据生命周期可视化图表_2025_10_20.md
```

### 数据流简要说明

```text
应用程序
  ↓ (SDK采集)
OpenTelemetry SDK
  ↓ (OTLP/gRPC 或 OTLP/HTTP)
OpenTelemetry Collector
  ↓ (处理: 采样、批处理、属性增强)
Jaeger Backend
  ↓ (存储和索引)
Jaeger UI
  ↑ (查询和展示)
你看到的Trace！
```

### 核心概念速览

**Trace (追踪)**:

- 表示一个完整的请求流程
- 包含多个Spans
- 示例: 处理一个订单的完整过程

**Span (跨度)**:

- 表示一个操作单元
- 有开始时间和结束时间
- 示例: 调用支付网关

**Attributes (属性)**:

- 描述Span的元数据
- 标准属性 + 自定义属性
- 示例: `http.method`, `myshop.order.id`

✅ **第5分钟完成！** 你已掌握基础概念。

---

## 🎉 恭喜！快速入门完成

### 你已经学会了

```text
✅ 启动OTLP环境
✅ 运行示例应用
✅ 查看追踪数据
✅ 理解基本概念
✅ 查看数据流程
```

---

## 🚀 下一步学习

### 深入学习（按推荐顺序）

| 主题 | 文档 | 时间 | 难度 |
|------|------|------|------|
| **核心概念** | [数据模型指南](📊_数据模型与语义转换完整指南_2025_10_20.md) | 30分钟 | ⭐⭐ |
| **标准符合** | [对标分析报告](📊_OTLP项目2025年10月20日全面对标分析报告.md) | 1小时 | ⭐⭐⭐ |
| **完整流程** | [可视化图表](📊_OTLP数据生命周期可视化图表_2025_10_20.md) | 30分钟 | ⭐⭐ |
| **实践案例** | [电商示例README](examples/e-commerce-order-tracking/README.md) | 20分钟 | ⭐ |
| **生产部署** | [Collector配置指南](examples/collector-configurations/README.md) | 45分钟 | ⭐⭐⭐ |

### 实践练习

#### 练习1: 添加自定义属性

修改示例代码，添加你自己的业务属性：

```go
// 在 main.go 中添加
span.SetAttributes(
    attribute.String("my_company.customer.vip", "true"),
    attribute.String("my_company.region", "us-west"),
)
```

重新运行，在Jaeger UI中查看新属性。

#### 练习2: 配置采样

修改Collector配置，启用智能采样：

```yaml
# 编辑 otel-config.yaml
processors:
  tail_sampling:
    policies:
      - name: error-traces
        type: status_code
        status_code:
          status_codes: [ERROR]
      - name: slow-traces
        type: latency
        latency:
          threshold_ms: 1000
```

重启Collector，观察采样效果。

#### 练习3: 多后端导出

配置Collector同时导出到Jaeger和Elasticsearch：

```yaml
exporters:
  jaeger:
    endpoint: jaeger:14250
  elasticsearch:
    endpoints: [http://elasticsearch:9200]

service:
  pipelines:
    traces:
      exporters: [jaeger, elasticsearch]
```

---

## 🛠️ 故障排查

### 问题1: Collector连接失败

**症状**: 应用报错 "failed to connect to collector"

**解决**:

```bash
# 检查Collector是否运行
docker ps | grep otel-collector

# 检查端口是否正确
# gRPC: 4317, HTTP: 4318

# 查看Collector日志
docker logs otel-collector
```

### 问题2: Jaeger UI中看不到Trace

**症状**: Jaeger UI是空的

**解决**:

1. **等待15-30秒**（数据有延迟）
2. **检查Service名称**是否正确
3. **检查时间范围**（默认是最近1小时）
4. **查看Collector日志**:

```bash
docker logs otel-collector | grep "spans received"
docker logs otel-collector | grep "spans exported"
```

### 问题3: Docker内存不足

**症状**: 容器频繁重启

**解决**:

```bash
# 增加Docker内存限制
# Docker Desktop -> Settings -> Resources -> Memory: 4GB+

# 或者修改 docker-compose.yml
services:
  otel-collector:
    mem_limit: 2g
```

---

## 📚 推荐阅读顺序

### 第1天: 基础入门

1. ✅ **本指南**（5分钟）
2. **电商订单追踪示例README**（20分钟）
3. **金融交易追踪示例README**（20分钟）

### 第2天: 深入理解

1. **数据模型与语义转换指南**（1-2小时）
2. **可视化图表文档**（30分钟）
3. **Collector配置示例**（45分钟）

### 第3天: 标准符合

1. **OTLP全面对标分析报告**（1-2小时）
2. **Semantic Conventions学习**
3. **最佳实践总结**

### 第4-5天: 生产部署 🚀 NEW

1. **[Docker部署指南](🐳_Docker部署完整指南.md)**（1小时）
2. **[Kubernetes部署指南](☸️_Kubernetes部署完整指南.md)**（2小时）
3. **[安全最佳实践](🔒_安全最佳实践指南.md)**（1小时）

### 第6-7天: 运维优化 ⚡ NEW

1. **[监控告警完整指南](📊_监控告警完整指南.md)**（1.5小时）
2. **[故障排查完整手册](🔧_故障排查完整手册.md)**（1.5小时）
3. **[性能优化完整指南](⚡_性能优化完整指南.md)**（2小时）

---

## 🔗 快速链接

### 官方资源

- [OpenTelemetry官网](https://opentelemetry.io/)
- [OTLP规范](https://opentelemetry.io/docs/specs/otlp/)
- [Jaeger文档](https://www.jaegertracing.io/docs/)
- [Collector文档](https://opentelemetry.io/docs/collector/)

### 项目资源

**核心文档**:

- [项目仪表板](PROJECT_DASHBOARD.md) - 查看项目全景
- [可视化分析中心](可视化分析_2025_10_20/README.md) - 多维度分析
- [学术论文框架](academic/OTLP_Formal_Verification_Paper_Framework.md) - 深入研究

**部署运维** ⭐ NEW:

- [🐳 Docker部署指南](🐳_Docker部署完整指南.md) - 容器化部署
- [☸️ Kubernetes部署指南](☸️_Kubernetes部署完整指南.md) - 生产级K8s
- [🔒 安全最佳实践](🔒_安全最佳实践指南.md) - 安全加固
- [📊 监控告警指南](📊_监控告警完整指南.md) - Prometheus+Grafana
- [🔧 故障排查手册](🔧_故障排查完整手册.md) - 问题诊断
- [⚡ 性能优化指南](⚡_性能优化完整指南.md) - 性能调优

### 社区资源

- [OpenTelemetry Slack](https://cloud-native.slack.com/)
- [GitHub仓库](https://github.com/open-telemetry/)
- [CNCF Blog](https://www.cncf.io/blog/)

---

## 💡 小贴士

### 提高学习效率

1. **边学边实践** - 不要只看文档，动手运行示例
2. **修改参数** - 尝试修改配置，观察效果变化
3. **查看日志** - 日志是最好的学习材料
4. **提问交流** - 遇到问题及时提问

### 常用命令速查

```bash
# 启动环境
docker-compose up -d

# 停止环境
docker-compose down

# 查看日志
docker-compose logs -f otel-collector

# 重启Collector
docker-compose restart otel-collector

# 清理数据
docker-compose down -v
```

---

## 🎊 总结

### 你已经完成了

✅ **5分钟快速入门**  
✅ **运行了第一个示例**  
✅ **看到了第一个Trace**  
✅ **理解了基本概念**

### 继续学习之旅

🚀 **掌握核心概念** - 学习数据模型和语义约定  
🔧 **实践配置优化** - 学习Collector高级配置  
📊 **深入分析** - 学习性能分析和故障排查  
🏆 **生产部署** - 部署到真实生产环境

---

**创建时间**: 2025年10月20日  
**版本**: v1.0.0  
**适用范围**: 所有新手用户  
**预计学习时间**: 5分钟

---

**🎉 欢迎来到OpenTelemetry和OTLP的世界！** 🚀✨

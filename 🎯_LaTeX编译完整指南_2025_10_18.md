# 🎯 LaTeX编译完整指南（2025-10-18）

> **目标**: 编译ICSE 2026论文生成PDF  
> **当前状态**: ⚠️ LaTeX环境未安装  
> **预计时间**: 1-2小时（首次）  
> **难度**: ⭐⭐☆☆☆ (中低)

---

## 📋 快速检查清单

在开始编译之前，请确认：

```text
✅ 所有Section文件完整（7个.tex文件）
✅ 所有Figure文件完整（8个.tex文件）
✅ 主文件存在（paper_main.tex）
✅ 参考文献文件存在（references.bib）
⏳ LaTeX环境已安装（待安装）
```

---

## 📦 第一步：安装LaTeX环境

### Windows系统推荐方案

#### 方案A：TeX Live（推荐）⭐⭐⭐⭐⭐

**优点**:

- 完整、稳定、社区支持好
- 包含所有需要的包
- 定期更新

**安装步骤**:

1. **下载安装器**

   ```powershell
   # 访问官网下载
   # https://tug.org/texlive/acquire-netinstall.html
   
   # 或使用国内镜像（更快）
   # https://mirrors.tuna.tsinghua.edu.cn/CTAN/systems/texlive/tlnet/
   ```

2. **运行安装**

   ```powershell
   # 下载 install-tl-windows.exe
   # 双击运行，选择"简单安装"
   # 安装路径: C:\texlive\2024 （默认）
   # 安装时间: 1-2小时（取决于网速）
   # 磁盘空间: ~7GB
   ```

3. **验证安装**

   ```powershell
   pdflatex --version
   # 应该显示: pdfTeX 3.141592653-2.6-1.40.25 (TeX Live 2024/W32TeX)
   
   bibtex --version
   # 应该显示: BibTeX 0.99d (TeX Live 2024/W32TeX)
   ```

#### 方案B：MiKTeX（轻量级）⭐⭐⭐⭐

**优点**:

- 安装快（按需下载包）
- 磁盘占用小
- 自动安装缺失包

**安装步骤**:

1. **下载安装器**

   ```text
   https://miktex.org/download
   下载 basic-miktex-24.1-x64.exe
   ```

2. **安装**

   ```powershell
   # 运行安装程序
   # 选择"Always install missing packages on-the-fly"
   # 安装路径: C:\Program Files\MiKTeX （默认）
   # 安装时间: 5-10分钟
   # 磁盘空间: ~300MB（基础），按需增加
   ```

3. **配置自动安装**

   ```powershell
   # 打开 MiKTeX Console
   # Settings → General → Package installation: Always
   ```

#### 方案C：在线编译（无需安装）⭐⭐⭐

**使用Overleaf**:

- 访问 <https://www.overleaf.com>
- 创建新项目
- 上传所有.tex, .bib文件
- 在线编译

**优点**: 无需本地安装，协作方便  
**缺点**: 需要网络，免费版有限制

---

## 🛠️ 第二步：验证必需包

我们的论文使用了以下LaTeX包，请确保已安装：

### 核心包（必需）

```latex
\documentclass[sigconf,review,anonymous]{acmart}  % ACM会议模板

\usepackage{amsmath,amssymb}      % 数学符号
\usepackage{algorithm}            % 算法环境
\usepackage{algorithmic}          % 算法伪代码
\usepackage{graphicx}             % 图片支持
\usepackage{booktabs}             % 专业表格
\usepackage{tikz}                 % 图形绘制
\usepackage{pgfplots}             % 数据图表
```

### TikZ库（用于Figures）

```latex
\usetikzlibrary{
    shapes,
    arrows,
    positioning,
    calc,
    fit,
    backgrounds,
    decorations.pathreplacing
}
```

### 检查包是否安装

**TeX Live**:

```powershell
kpsewhich acmart.cls
kpsewhich tikz.sty
kpsewhich pgfplots.sty
# 如果返回路径，说明已安装
# 如果返回空，需要安装
```

**MiKTeX**:

```powershell
# MiKTeX会自动安装缺失的包，首次编译可能较慢
```

---

## 📝 第三步：编译论文

### 方法A：使用命令行（推荐）

```powershell
# 切换到academic目录
cd E:\_src\OTLP\academic

# 第一遍编译（生成.aux文件）
pdflatex -interaction=nonstopmode paper_main.tex

# 编译参考文献
bibtex paper_main

# 第二遍编译（插入引用）
pdflatex -interaction=nonstopmode paper_main.tex

# 第三遍编译（解决交叉引用）
pdflatex -interaction=nonstopmode paper_main.tex
```

**为什么需要编译3次？**

- 第1次: 生成.aux文件（交叉引用信息）
- BibTeX: 处理参考文献
- 第2次: 插入引用和目录
- 第3次: 解决所有交叉引用（Figure, Table, Section等）

### 方法B：使用编译脚本（更方便）

**创建脚本**:

```powershell
# compile_paper.ps1
param(
    [switch]$Clean
)

$mainFile = "paper_main"
$acadDir = "E:\_src\OTLP\academic"

Set-Location $acadDir

if ($Clean) {
    Write-Host "🧹 清理中间文件..."
    Remove-Item -Path *.aux, *.log, *.bbl, *.blg, *.out, *.toc, *.lof, *.lot -ErrorAction SilentlyContinue
    Write-Host "✅ 清理完成"
    exit
}

Write-Host "📝 第1遍编译..."
pdflatex -interaction=nonstopmode $mainFile.tex | Out-Null

Write-Host "📚 编译参考文献..."
bibtex $mainFile | Out-Null

Write-Host "📝 第2遍编译..."
pdflatex -interaction=nonstopmode $mainFile.tex | Out-Null

Write-Host "📝 第3遍编译..."
pdflatex -interaction=nonstopmode $mainFile.tex

if (Test-Path "$mainFile.pdf") {
    Write-Host ""
    Write-Host "✅ 编译成功！PDF已生成: $mainFile.pdf"
    Write-Host ""
    Write-Host "📄 文件大小: $((Get-Item $mainFile.pdf).Length / 1KB) KB"
    Write-Host "📏 页数: (请用PDF阅读器查看)"
    Write-Host ""
    Write-Host "🔍 检查编译日志:"
    Write-Host "  - 错误: $mainFile.log"
    Write-Host "  - 参考文献: $mainFile.blg"
} else {
    Write-Host ""
    Write-Host "❌ 编译失败！请检查日志文件"
    Write-Host "  $mainFile.log"
    exit 1
}
```

**使用脚本**:

```powershell
# 编译
.\compile_paper.ps1

# 清理中间文件
.\compile_paper.ps1 -Clean
```

### 方法C：使用IDE

**推荐IDE**:

1. **VS Code + LaTeX Workshop**

   ```text
   安装插件: LaTeX Workshop
   打开paper_main.tex
   Ctrl+Alt+B 编译
   ```

2. **TeXstudio**

   ```text
   下载: https://www.texstudio.org/
   打开paper_main.tex
   F5 或 Tools → Build & View
   ```

3. **TeXworks** (随TeX Live安装)

   ```text
   打开paper_main.tex
   选择 pdfLaTeX
   点击绿色播放按钮
   ```

---

## 🐛 第四步：处理编译错误

### 常见错误及解决方案

#### 错误1: `File 'acmart.cls' not found`

**原因**: ACM模板未安装  
**解决**:

```powershell
# TeX Live
tlmgr install acmart

# MiKTeX
# 编译时自动安装，或手动：
mpm --install=acmart
```

#### 错误2: `Package tikz Error: Unknown option 'positioning'`

**原因**: TikZ库未加载  
**解决**: 在paper_main.tex中添加

```latex
\usetikzlibrary{positioning}
```

#### 错误3: `Undefined control sequence \cmark`

**原因**: 符号包未加载  
**解决**: 添加

```latex
\usepackage{amssymb}
\newcommand{\cmark}{\ding{51}}  % ✓
\newcommand{\xmark}{\ding{55}}  % ✗
```

#### 错误4: `! LaTeX Error: File '...figure.tex' not found`

**原因**: Figure文件路径错误  
**解决**: 检查`\input{}`路径

```latex
\input{figures/fig1_otlp_architecture.tex}
% 确保路径相对于paper_main.tex正确
```

#### 错误5: `Citation 'xxx' undefined`

**原因**: BibTeX未运行或references.bib有错误  
**解决**:

```powershell
# 重新运行BibTeX
bibtex paper_main

# 检查references.bib语法
# 每个条目必须有唯一的key
```

#### 错误6: `Overfull \hbox`

**原因**: 文本超出边界  
**解决**:

- 添加换行 `\\`
- 调整表格/图片宽度
- 使用`\sloppy`（不推荐）

#### 错误7: 编译慢或卡住

**解决**:

```powershell
# 清理缓存
.\compile_paper.ps1 -Clean

# 删除.aux文件
Remove-Item *.aux

# 重新编译
pdflatex paper_main.tex
```

---

## ✅ 第五步：验证PDF质量

### 检查清单

编译成功后，打开PDF并检查：

#### 1. 基础检查 ✅

```text
□ 标题、作者正确
□ 摘要完整
□ 关键词显示
□ 页码连续
□ 目标页数: 11页（正文）
```

#### 2. Sections检查 ✅

```text
□ Section 1: Introduction
□ Section 2: Background
□ Section 3: Framework
□ Section 4: Implementation
□ Section 5: Evaluation
□ Section 6: Related Work
□ Section 7: Conclusion
□ References
```

#### 3. Figures检查 ✅

```text
□ Figure 1: OTLP架构
□ Figure 2: 框架架构
□ Figure 3: 类型层次
□ Figure 4: Monoid组合
□ Figure 5: Lattice聚合
□ Figure 6: 三重流分析
□ Figure 7: 评估结果
□ Figure 8: 性能开销
```

验证：

- 图片清晰（TikZ矢量图应该非常清晰）
- 图题（caption）正确显示
- 图片编号连续（1-8）
- 图片在正确位置（接近引用处）

#### 4. Tables检查 ✅

```text
□ Table 1: Systems Overview
□ Table 2: Violations Detected
□ Table 3: Detection Effectiveness
□ Table 4: Remediation Results
□ Table 5: Latency Overhead
□ Table 6: Implementation Benchmarks
□ Table 7: Related Work Comparison
```

验证：

- 表格对齐正确
- 数字易读
- 表题正确
- 表格编号连续（1-7）

#### 5. 引用检查 ✅

```text
□ 所有\ref{}正确解析（没有"??"）
□ 所有\cite{}有对应参考文献
□ Figure/Table引用正确
□ Section引用正确
□ References完整（~50-80条）
```

#### 6. 格式检查 ✅

```text
□ ACM双栏格式
□ 字体大小正确（10pt正文）
□ 行距正确
□ 边距符合ACM要求
□ 页眉/页脚正确
```

#### 7. 数学公式检查 ✅

```text
□ 所有公式渲染正确
□ 符号清晰
□ 公式编号正确
□ 行内/行间公式区分正确
```

---

## 📊 预期结果

### 成功编译后应该看到

```text
✅ paper_main.pdf (约 1.2-1.5 MB)
✅ 11页正文 + 2页参考文献 = 共13-14页
✅ 8个TikZ图表（矢量，放大不失真）
✅ 7个表格（专业booktabs风格）
✅ ~50-80条参考文献
✅ 无编译错误（可能有minor warnings）
```

### PDF文件结构

```text
Page 1: 标题、作者、摘要、关键词、ACM分类、Section 1开始
Page 2-3: Section 1 (Introduction) 续 + Section 2 (Background)
Page 4-5: Section 3 (Framework) - 最长的部分
Page 6-7: Section 4 (Implementation)
Page 8-9: Section 5 (Evaluation) - 包含大量tables
Page 10: Section 6 (Related Work)
Page 11: Section 7 (Conclusion)
Page 12-14: References
```

---

## 🔧 高级优化（可选）

### 1. 减少页数（如果超过11页）

```latex
% 减少空白
\usepackage[compact]{titlesec}

% 减少行距
\linespread{0.98}

% 减少图表空间
\setlength{\textfloatsep}{8pt}
\setlength{\floatsep}{8pt}
```

### 2. 提高编译速度

```latex
% 在paper_main.tex开头添加（仅用于草稿）
\usepackage{draft}  % 不渲染图片，只显示框

% 或仅编译特定sections
\includeonly{sections/05_evaluation}
```

### 3. 生成压缩PDF（减小文件大小）

```powershell
# 使用Ghostscript压缩
gs -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dPDFSETTINGS=/prepress -dNOPAUSE -dQUIET -dBATCH -sOutputFile=paper_main_compressed.pdf paper_main.pdf
```

---

## 📚 有用的LaTeX命令

### 调试技巧

```latex
% 显示边界框（调试图片位置）
\usepackage{showframe}

% 显示标签（调试引用）
\usepackage{showkeys}

% 显示行号（调试具体位置）
\usepackage{lineno}
\linenumbers
```

### 快速定位错误

```powershell
# 查找编译日志中的错误
Select-String -Path paper_main.log -Pattern "Error|Warning" | Select-Object -First 10

# 查找未定义引用
Select-String -Path paper_main.log -Pattern "undefined"
```

---

## 🎯 编译时间线（首次）

```text
00:00 - 安装TeX Live (或MiKTeX)
01:00 - 验证安装
01:05 - 第1遍编译 (1-2分钟，首次慢因为要加载包)
01:07 - 编译参考文献 (10秒)
01:08 - 第2遍编译 (30秒)
01:09 - 第3遍编译 (30秒)
01:10 - ✅ 生成PDF！

后续编译: 每次 < 1分钟
```

---

## 📞 需要帮助？

### 遇到问题时

1. **检查日志文件**

   ```powershell
   Get-Content paper_main.log -Tail 50
   ```

2. **搜索错误信息**

   ```text
   Google: "LaTeX [错误信息]"
   StackOverflow: https://tex.stackexchange.com/
   ```

3. **检查模板版本**

   ```powershell
   kpsewhich acmart.cls
   # 应该是 acmart v1.87+ (2023)
   ```

4. **重新安装包**

   ```powershell
   # TeX Live
   tlmgr update --self
   tlmgr update --all
   
   # MiKTeX
   # Open MiKTeX Console → Updates → Update now
   ```

---

## ✅ 完成

编译成功后，你将拥有：

```text
✅ paper_main.pdf - 可提交的论文PDF
✅ 验证通过的图表和表格
✅ 完整的参考文献
✅ 符合ACM SIGCONF格式

下一步: 
1. 仔细审阅PDF
2. 检查typos和格式
3. 请同事/导师审阅
4. 根据反馈修改
5. 准备投稿！
```

---

**创建时间**: 2025-10-18 17:30  
**适用范围**: OTLP项目ICSE 2026论文编译  
**维护状态**: 随时更新  

**🎉 祝编译顺利！如有问题随时询问！** 📚✨

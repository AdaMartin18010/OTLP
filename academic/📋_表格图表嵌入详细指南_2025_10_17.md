# 📋 表格和图表嵌入详细指南

> **指南类型**: 逐步操作手册  
> **目标**: 将6个表格和8个图表嵌入LaTeX论文  
> **预计时间**: 2-3小时  
> **前置条件**: 首次编译成功，生成了初始PDF

---

## 🎯 执行摘要

本指南将指导您完成以下工作：

- ✅ 嵌入**6个表格**（从`PAPER_TABLES_LATEX.md`）
- ✅ 嵌入**8个TikZ图表**（从`PAPER_FIGURES_TIKZ.md`）
- ✅ 调整表格/图表位置和大小
- ✅ 验证所有引用正确
- ✅ 重新编译生成最终PDF

---

## 📊 嵌入计划总览

### 表格分配

| 表格 | 位置 | 文件 | 预计时间 |
|------|------|------|----------|
| Table 1: Theorem Summary | Appendix | `paper_main.tex` | 5分钟 |
| Table 2: Systems Overview | Section 5 | `05_evaluation.tex` | 10分钟 |
| Table 3: Violations | Section 5 | `05_evaluation.tex` | 10分钟 |
| Table 4: Effectiveness | Section 5 | `05_evaluation.tex` | 10分钟 |
| Table 5: Performance | Section 5 | `05_evaluation.tex` | 10分钟 |
| Table 6: Comparison | Section 6 | `06_related_work.tex` | 10分钟 |

**总计**: 约55分钟

### 图表分配

| 图表 | 位置 | 文件 | 预计时间 |
|------|------|------|----------|
| Figure 1: OTLP Architecture | Section 2 | `02_background.tex` | 15分钟 |
| Figure 2: Framework Architecture | Section 3 | `03_framework.tex` | 15分钟 |
| Figure 3: Type System | Section 3 | `03_framework.tex` | 15分钟 |
| Figure 4: Triple Flow | Section 3 | `03_framework.tex` | 15分钟 |
| Figure 5: Implementation | Section 4 | `04_implementation.tex` | 15分钟 |
| Figure 6: Violations | Section 5 | `05_evaluation.tex` | 15分钟 |
| Figure 7: Performance | Section 5 | `05_evaluation.tex` | 15分钟 |
| Figure 8: Workflow | Section 7 | `07_conclusion.tex` | 10分钟 |

**总计**: 约115分钟

**总时间**: 约**2小时50分钟**（包含编译和调整）

---

## 📋 详细嵌入步骤

### Step 1: 准备工作（5分钟）

#### 1.1 打开必要文件

**本地编辑**（如果使用MiKTeX）:

```bash
# 打开这些文件
academic/sections/02_background.tex
academic/sections/03_framework.tex
academic/sections/04_implementation.tex
academic/sections/05_evaluation.tex
academic/sections/06_related_work.tex
academic/sections/07_conclusion.tex
academic/paper_main.tex

# 参考文件
academic/PAPER_TABLES_LATEX.md
academic/PAPER_FIGURES_TIKZ.md
```

**Overleaf编辑**:

- 在左侧文件树中逐个点击打开上述文件

#### 1.2 创建备份

**本地**:

```bash
cd E:\_src\OTLP\academic
cp -r sections sections_backup_$(date +%Y%m%d)
```

**Overleaf**:

- 点击 "History" 查看当前版本（自动备份）

---

### Step 2: 嵌入表格（55分钟）

#### 2.1 Table 2: Systems Overview → `05_evaluation.tex`

**位置**: 在"Case Study Systems"小节的第一段后

**步骤**:

1. **打开源文件**: `PAPER_TABLES_LATEX.md`
2. **复制代码**: 找到"Table 2: Case Study Systems Overview"，复制整个LaTeX代码块（从`\begin{table*}`到`\end{table*}`）
3. **打开目标文件**: `sections/05_evaluation.tex`
4. **找到插入位置**: 搜索"We evaluate our framework on five real-world systems"这段文字
5. **插入代码**: 在这段文字的下一个段落之前粘贴表格代码
6. **调整位置**: 确保表格代码在段落之间，不要插入到段落中间

**示例**:

```latex
% 在05_evaluation.tex中

\subsection{Case Study Systems}

We evaluate our framework on five real-world systems spanning different 
domains and scales. These systems represent typical microservice architectures 
with varying complexity and OTLP implementation maturity.

% ← 在这里插入 Table 2 代码
\begin{table*}[t]
\caption{Case Study Systems Overview}
\label{tab:systems}
...
\end{table*}

The systems were selected based on three criteria: (1) production deployment...
```

**验证**: 文中应该已经有`Table~\ref{tab:systems}`这样的引用

#### 2.2 Table 3: Violations → `05_evaluation.tex`

**位置**: 在"Violations Detected"小节的第一段后

**步骤**:

1. 复制`PAPER_TABLES_LATEX.md`中的Table 3代码
2. 在`05_evaluation.tex`中找到"violations detected"相关段落
3. 在段落后插入表格代码

**示例**:

```latex
\subsection{Violations Detected}

Our framework detected a total of 6,167 violations across 9.3M traces.

% ← 在这里插入 Table 3 代码
\begin{table}[t]
\caption{Violations Detected Across All Systems}
\label{tab:violations}
...
\end{table}

As shown in Table~\ref{tab:violations}, the violation rate varies...
```

#### 2.3 Table 4: Effectiveness → `05_evaluation.tex`

**位置**: 在"Detection Effectiveness"小节

**步骤**:

1. 复制`PAPER_TABLES_LATEX.md`中的Table 4代码
2. 在`05_evaluation.tex`中找到"detection effectiveness"相关段落
3. 插入表格代码

#### 2.4 Table 5: Performance → `05_evaluation.tex`

**位置**: 在"Performance Overhead"小节

**步骤**:

1. 复制`PAPER_TABLES_LATEX.md`中的Table 5代码
2. 在`05_evaluation.tex`中找到"performance overhead"相关段落
3. 插入表格代码

#### 2.5 Table 6: Comparison → `06_related_work.tex`

**位置**: 在Related Work的比较小节

**步骤**:

1. 复制`PAPER_TABLES_LATEX.md`中的Table 6代码
2. 在`06_related_work.tex`中找到比较相关段落
3. 插入表格代码

**示例**:

```latex
\subsection{Comparison with Existing Approaches}

Table~\ref{tab:comparison} compares our framework with existing OTLP 
verification and tracing analysis tools.

% ← 在这里插入 Table 6 代码
\begin{table*}[t]
\caption{Comparison with Related Work}
\label{tab:comparison}
...
\end{table*}

Our approach is unique in providing...
```

#### 2.6 Table 1: Theorem Summary → `paper_main.tex` (Appendix)

**位置**: 在Appendix部分（如果有）或移到在线附录

**步骤**:

1. 打开`paper_main.tex`
2. 找到`\end{document}`之前
3. 添加Appendix section（如果还没有）

**示例**:

```latex
% 在paper_main.tex末尾，\end{document}之前

\appendix
\section{Formal Proof Details}

Table~\ref{tab:theorems} summarizes the eight theorems proven in our framework.

\begin{table}[h]
\caption{Summary of Formal Theorems and Proofs}
\label{tab:theorems}
...
\end{table}

For complete proofs, see our online appendix at: \url{https://...}

\end{document}
```

**重要提示**: 由于页数限制（11页），Table 1可能需要移到在线附录。可以先尝试包含，如果页数超标再移除。

---

### Step 3: 嵌入图表（115分钟）

#### 3.1 Figure 1: OTLP Architecture → `02_background.tex`

**位置**: 在OTLP协议介绍后

**步骤**:

1. **复制代码**: 从`PAPER_FIGURES_TIKZ.md`复制Figure 1的完整TikZ代码
2. **打开目标文件**: `sections/02_background.tex`
3. **找到插入位置**: 在"OTLP (OpenTelemetry Protocol)"小节后
4. **插入代码**: 粘贴Figure 1代码

**示例**:

```latex
\subsection{OTLP Protocol}

OTLP is the standard protocol for transmitting telemetry data in OpenTelemetry.
It defines three primary data types: Traces, Metrics, and Logs.

% ← 在这里插入 Figure 1 代码
\begin{figure}[t]
\centering
\begin{tikzpicture}[...]
...
\end{tikzpicture}
\caption{OTLP Architecture...}
\label{fig:otlp-arch}
\end{figure}

As illustrated in Figure~\ref{fig:otlp-arch}, applications...
```

**验证**: 确保文中有`Figure~\ref{fig:otlp-arch}`引用

#### 3.2 Figure 2: Framework Architecture → `03_framework.tex`

**位置**: 在框架总览小节

**步骤**:

1. 复制Figure 2代码（注意使用`\begin{figure*}`而非`\begin{figure}`，因为是双栏图）
2. 在`03_framework.tex`开头或框架介绍段落后插入

**示例**:

```latex
\section{Formal Verification Framework}

Our framework consists of five complementary verification components, each 
addressing different aspects of OTLP correctness.

% ← 在这里插入 Figure 2 代码（双栏图）
\begin{figure*}[t]
\centering
\begin{tikzpicture}[...]
...
\end{tikzpicture}
\caption{Framework Architecture...}
\label{fig:framework}
\end{figure*}

Figure~\ref{fig:framework} shows the overall architecture...
```

#### 3.3 Figure 3: Type System → `03_framework.tex`

**位置**: 在Type System小节

**步骤**:

1. 复制Figure 3代码
2. 在`03_framework.tex`的Type System小节后插入

#### 3.4 Figure 4: Triple Flow Analysis → `03_framework.tex`

**位置**: 在Flow Analysis小节

**步骤**:

1. 复制Figure 4代码
2. 在Flow Analysis小节后插入

#### 3.5 Figure 5: Implementation Architecture → `04_implementation.tex`

**位置**: 在Implementation Overview小节

**步骤**:

1. 复制Figure 5代码
2. 在`04_implementation.tex`开头插入

**示例**:

```latex
\section{Implementation}

We implemented our framework in Rust, totaling approximately 5,000 lines of code.

% ← 在这里插入 Figure 5 代码
\begin{figure}[t]
\centering
\begin{tikzpicture}[...]
...
\end{tikzpicture}
\caption{Implementation Architecture...}
\label{fig:implementation}
\end{figure}

Figure~\ref{fig:implementation} shows the implementation structure...
```

#### 3.6 Figure 6: Violation Distribution → `05_evaluation.tex`

**位置**: 在Violations小节

**步骤**:

1. 复制Figure 6代码
2. 在violations讨论段落后插入

#### 3.7 Figure 7: Performance Comparison → `05_evaluation.tex`

**位置**: 在Performance小节

**步骤**:

1. 复制Figure 7代码
2. 在performance讨论段落后插入

#### 3.8 Figure 8: Verification Workflow → `07_conclusion.tex`

**位置**: 在Future Work小节（可选）

**步骤**:

1. 复制Figure 8代码
2. 在`07_conclusion.tex`的适当位置插入

---

### Step 4: 重新编译（15分钟）

#### 4.1 Overleaf用户

**步骤**:

1. 点击绿色"Recompile"按钮
2. 等待编译完成（可能需要2-3分钟）
3. 查看右侧PDF预览
4. 检查所有表格和图表是否正确显示

**常见问题**:

- **问题**: TikZ图表未渲染
  - **解决**: 检查`paper_main.tex`是否包含`\usepackage{tikz}`
  
- **问题**: 表格超出页面宽度
  - **解决**: 使用`\resizebox`调整大小或使用`\small`字体

#### 4.2 MiKTeX用户

**步骤**:

1. 保存所有修改的文件
2. 运行编译脚本:

   ```bash
   cd E:\_src\OTLP\academic
   .\compile_paper.bat
   ```

3. 等待编译完成
4. 打开`paper_main.pdf`查看结果

**编译命令**（如果脚本不工作）:

```bash
cd E:\_src\OTLP\academic
pdflatex paper_main.tex
bibtex paper_main
pdflatex paper_main.tex
pdflatex paper_main.tex
```

---

### Step 5: 验证和调整（30分钟）

#### 5.1 检查所有引用

**检查清单**:

- [ ] 所有`\ref{tab:xxx}`都正确指向表格
- [ ] 所有`\ref{fig:xxx}`都正确指向图表
- [ ] PDF中没有`??`标记（未定义引用）
- [ ] 引用编号连续且正确

**如何修复未定义引用**:

如果看到`??`：

1. 重新编译2-3次（LaTeX需要多次编译来解析引用）
2. 检查`\label{}`和`\ref{}`的名称是否一致
3. 确保`\label{}`在`\caption{}`之后

#### 5.2 检查表格格式

**检查清单**:

- [ ] 所有表格都有标题（`\caption{}`）
- [ ] 所有表格都有标签（`\label{}`）
- [ ] 表格内容完整，无错位
- [ ] 表格宽度适中，未超出页面
- [ ] 表格字体清晰可读

**调整表格大小**:

如果表格太宽：

```latex
% 方法1: 使用\small字体
\begin{table}[t]
\small  % ← 添加这行
\caption{...}
...
\end{table}

% 方法2: 使用\resizebox
\begin{table}[t]
\caption{...}
\resizebox{\columnwidth}{!}{  % ← 添加这行
\begin{tabular}{...}
...
\end{tabular}
}  % ← 添加这行
\end{table}
```

#### 5.3 检查图表显示

**检查清单**:

- [ ] 所有TikZ图表正确渲染
- [ ] 图表大小适中，清晰可读
- [ ] 图表标题准确描述内容
- [ ] 图表位置合理，不影响文本流

**调整图表大小**:

如果图表太大：

```latex
\begin{figure}[t]
\centering
\begin{tikzpicture}[scale=0.8]  % ← 添加scale参数
...
\end{tikzpicture}
\caption{...}
\end{figure}
```

#### 5.4 检查页数

**目标**: 11页（±1页）

**查看页数**:

- Overleaf: PDF预览右下角
- MiKTeX: PDF阅读器（如Adobe Reader）

**如果页数超标（>12页）**:

优先措施：

1. ✅ 移除Table 1（Appendix表格）→ 移到在线附录
2. ✅ 减少图表大小（使用`scale=0.7`）
3. ✅ 调整行距（`\vspace{-0.1in}`在表格后）
4. ✅ 精简文字（减少冗余表述）

**如果页数不足（<10页）**:

补充措施：

1. ✅ 添加更多讨论
2. ✅ 扩展相关工作部分
3. ✅ 添加更多实验结果

---

### Step 6: 最终检查（15分钟）

#### 6.1 完整性检查

**文档检查**:

- [ ] Abstract完整（≤200字）
- [ ] 7个主要章节都存在
- [ ] 所有表格都已嵌入（6个）
- [ ] 所有图表都已嵌入（8个）
- [ ] References正确显示（44篇）
- [ ] 页数符合要求（11±1页）

#### 6.2 格式检查

**ACM格式要求**:

- [ ] 使用`\documentclass[sigconf]{acmart}`
- [ ] 两栏布局
- [ ] 10pt字体
- [ ] 所有图表使用`[t]`或`[h]`位置参数
- [ ] 表格使用`\toprule`, `\midrule`, `\bottomrule`

#### 6.3 视觉检查

**浏览整个PDF**:

- [ ] 无明显排版错误
- [ ] 图表和表格分布均匀
- [ ] 无大片空白
- [ ] 无文本溢出
- [ ] 所有数学公式正确渲染

#### 6.4 生成最终PDF

**Overleaf**:

1. 点击"Download PDF"按钮
2. 保存为: `paper_main_v2_with_figures.pdf`

**MiKTeX**:

1. 复制PDF: `copy paper_main.pdf paper_main_v2_with_figures.pdf`
2. 保存到安全位置

---

## 🐛 常见问题解决

### 问题1: TikZ未渲染

**症状**: 图表位置显示空白或错误信息

**解决方案**:

1. 检查`paper_main.tex`是否包含：

   ```latex
   \usepackage{tikz}
   \usetikzlibrary{shapes,arrows,positioning,calc}
   ```

2. 如果使用Overleaf，等待包自动安装

3. 如果使用MiKTeX，运行：

   ```bash
   mpm --install=pgf
   mpm --install=tikz
   ```

### 问题2: 表格超出页面宽度

**症状**: 表格右侧被裁剪

**解决方案**:

```latex
% 方法1: 使用\small字体
\begin{table}[t]
\small
\caption{...}
\begin{tabular}{...}
...
\end{tabular}
\end{table}

% 方法2: 使用双栏表格（table*）
\begin{table*}[t]
\caption{...}
\begin{tabular}{...}
...
\end{tabular}
\end{table*}

% 方法3: 减少列宽
\begin{table}[t]
\caption{...}
\begin{tabular}{p{1.5cm}p{2cm}...}  % ← 使用p{}指定列宽
...
\end{tabular}
\end{table}
```

### 问题3: 引用显示为`??`

**症状**: PDF中看到`Table ??`或`Figure ??`

**解决方案**:

1. **重新编译3次**（LaTeX引用需要多次编译）
2. 检查`\label{}`和`\ref{}`名称是否匹配
3. 确保`\label{}`在`\caption{}`之后

### 问题4: 图表位置不理想

**症状**: 图表出现在错误的页面或位置

**解决方案**:

```latex
% 强制图表位置
\begin{figure}[h!]  % ← 添加!强制在此处
\centering
...
\end{figure}

% 或使用其他位置参数
[t]  % 页面顶部（推荐）
[b]  % 页面底部
[h]  % 当前位置
[H]  % 严格当前位置（需要\usepackage{float}）
```

### 问题5: 编译时间过长

**症状**: Overleaf编译超过5分钟

**解决方案**:

1. TikZ图表较多时是正常的
2. 使用`externalize`库（高级用户）：

   ```latex
   \usetikzlibrary{external}
   \tikzexternalize
   ```

3. 考虑将复杂图表转换为PDF/PNG嵌入

---

## 📊 进度跟踪清单

### 表格嵌入进度

- [ ] Table 1: Theorem Summary (Appendix)
- [ ] Table 2: Systems Overview (Evaluation)
- [ ] Table 3: Violations (Evaluation)
- [ ] Table 4: Effectiveness (Evaluation)
- [ ] Table 5: Performance (Evaluation)
- [ ] Table 6: Comparison (Related Work)

**进度**: _**/6 (**_%)

### 图表嵌入进度

- [ ] Figure 1: OTLP Architecture (Background)
- [ ] Figure 2: Framework Architecture (Framework)
- [ ] Figure 3: Type System (Framework)
- [ ] Figure 4: Triple Flow (Framework)
- [ ] Figure 5: Implementation (Implementation)
- [ ] Figure 6: Violations (Evaluation)
- [ ] Figure 7: Performance (Evaluation)
- [ ] Figure 8: Workflow (Conclusion)

**进度**: _**/8 (**_%)

### 验证清单

- [ ] 所有表格正确显示
- [ ] 所有图表正确渲染
- [ ] 所有引用正确（无`??`）
- [ ] 页数符合要求（11±1页）
- [ ] 无编译错误或警告
- [ ] PDF视觉质量良好

---

## 🎯 预期结果

### 完成后您将拥有

**文档状态**:

- ✅ 完整的论文PDF（包含所有表格和图表）
- ✅ 页数符合ICSE 2026要求（11页）
- ✅ 所有引用正确
- ✅ 专业的视觉呈现

**准备进入下一阶段**:

- 🔄 内部审阅（技术准确性+语言质量）
- 🔄 最终润色（标题优化+格式统一）
- 🔄 Artifact准备
- 🔄 ICSE 2026投稿

---

## 💡 优化建议

### 表格优化

1. **数据精简**: 如果表格太大，考虑只展示关键数据
2. **视觉分组**: 使用`\midrule`分隔不同类别
3. **突出重点**: 使用`\textbf{}`加粗重要数据
4. **单位一致**: 确保同一列的单位一致

### 图表优化

1. **颜色选择**: 使用色盲友好的配色方案
2. **字体大小**: 确保打印时仍然清晰（≥8pt）
3. **简洁原则**: 移除不必要的装饰元素
4. **标注清晰**: 所有元素都有清晰的标签

---

## 📞 总结

### 时间分配

```text
准备工作:     5分钟
表格嵌入:    55分钟 (6个表格)
图表嵌入:   115分钟 (8个图表)
重新编译:    15分钟
验证调整:    30分钟
最终检查:    15分钟

总计:      ~235分钟 (约4小时)
```

**实际建议**: 分两个工作时段完成

- **第一次（2小时）**: 嵌入所有表格和图表
- **第二次（2小时）**: 调整、验证和最终检查

### 下一步

完成表格/图表嵌入后：

1. ✅ **今晚/明天**: 完成所有嵌入工作
2. 🔄 **本周一**: 开始内部审阅
3. 🔄 **本周三**: 开始最终润色
4. 🔄 **本周五**: 生成最终PDF初稿
5. 🔄 **下周**: 准备Artifact和补充材料

---

**创建时间**: 2025年10月17日  
**文档类型**: 操作手册  
**使用时机**: 首次编译成功后  
**预计完成时间**: 2-4小时

---

**🎯 准备好编译后立即开始！Let's make this paper beautiful! 🎨**-

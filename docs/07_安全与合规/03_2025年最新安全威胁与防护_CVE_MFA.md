# 2025å¹´æœ€æ–°å®‰å…¨å¨èƒä¸é˜²æŠ¤æªæ–½

> **æ›´æ–°æ—¥æœŸ**: 2025å¹´10æœˆ18æ—¥  
> **åŸºäº**: 2025å¹´10æœˆæœ€æ–°å®‰å…¨å…¬å‘Šå’Œè¡Œä¸šè¶‹åŠ¿  
> **é‡è¦æ€§**: â­â­â­â­â­ æé«˜  
> **ç´§æ€¥ç¨‹åº¦**: ğŸ”´ éœ€è¦ç«‹å³å…³æ³¨

---

## ğŸš¨ æ‰§è¡Œæ‘˜è¦

**2025å¹´å¯è§‚æµ‹æ€§ç³»ç»Ÿé¢ä¸´çš„å…³é”®å®‰å…¨å¨èƒ**:

1. ğŸ”´ **Grafana CVE-2025-6023**: è´¦æˆ·å®Œå…¨æ¥ç®¡æ¼æ´
2. ğŸŸ¡ **å¼ºåˆ¶MFAè¦æ±‚**: è¡Œä¸šæ–°æ ‡å‡†
3. ğŸŸ  **ä¾›åº”é“¾æ”»å‡»**: OpenTelemetryç»„ä»¶é£é™©
4. ğŸ”µ **æ•°æ®æ³„éœ²**: PII/PHIé€šè¿‡è¿½è¸ªæ•°æ®æ³„éœ²

**ç«‹å³è¡ŒåŠ¨äº‹é¡¹**:

- [ ] æ£€æŸ¥Grafanaç‰ˆæœ¬å¹¶å‡çº§
- [ ] å¯ç”¨å¤šå› ç´ è®¤è¯ï¼ˆMFAï¼‰
- [ ] å®¡è®¡è¿½è¸ªæ•°æ®ä¸­çš„æ•æ„Ÿä¿¡æ¯
- [ ] æ›´æ–°å®‰å…¨ç­–ç•¥å’ŒåŸ¹è®­

---

## ğŸ”´ CVE-2025-6023: Grafanaä¸¥é‡æ¼æ´

### æ¼æ´æ¦‚è¿°

**CVEç¼–å·**: CVE-2025-6023  
**å‘ç°æ—¶é—´**: 2025å¹´10æœˆ  
**ä¸¥é‡ç¨‹åº¦**: ğŸ”´ **é«˜å±ï¼ˆCVSS 8.5ï¼‰**  
**å½±å“**: è´¦æˆ·å®Œå…¨æ¥ç®¡ï¼ˆAccount Takeoverï¼‰

### æ¼æ´è¯¦æƒ…

**å—å½±å“ç‰ˆæœ¬**:

```text
Grafana 9.x: 9.0.0 - 9.5.x
Grafana 10.x: 10.0.0 - 10.3.x
Grafana 11.x: 11.0.0 - 11.1.xï¼ˆæ—©æœŸç‰ˆæœ¬ï¼‰
```

**æ¼æ´åŸç†**:

```text
1. ä¸å®Œæ•´çš„ä¿®å¤ï¼ˆIncomplete Fixï¼‰
   - ä¹‹å‰CVEçš„ä¿®å¤ä¸å½»åº•
   - ç»•è¿‡æœºåˆ¶ä»ç„¶å­˜åœ¨

2. è®¤è¯ç»•è¿‡ï¼ˆAuthentication Bypassï¼‰
   - æ”»å‡»è€…å¯ä»¥ä¼ªé€ èº«ä»½ä»¤ç‰Œ
   - æ— éœ€ç”¨æˆ·å‡­æ®å³å¯ç™»å½•

3. æƒé™æå‡ï¼ˆPrivilege Escalationï¼‰
   - æ™®é€šç”¨æˆ· â†’ ç®¡ç†å‘˜
   - è®¿é—®æ‰€æœ‰ä»ªè¡¨æ¿å’Œæ•°æ®æº
```

**æ”»å‡»åœºæ™¯**:

```text
æ”»å‡»è€… â†’ æ„é€ æ¶æ„è¯·æ±‚ â†’ Grafana API
                â†“
        ç»•è¿‡è®¤è¯æ£€æŸ¥
                â†“
        è·å–ç®¡ç†å‘˜Token
                â†“
    å®Œå…¨æ§åˆ¶Grafanaå®ä¾‹
        â†“               â†“
  æŸ¥çœ‹æ‰€æœ‰æ•°æ®      ä¿®æ”¹é…ç½®/åˆ é™¤æ•°æ®
```

### å½±å“è¯„ä¼°

**å¯¹OTLPç³»ç»Ÿçš„å½±å“**:

| åœºæ™¯ | é£é™©ç­‰çº§ | å½±å“ |
|------|----------|------|
| **Grafanaå¯è§†åŒ–OTLPæ•°æ®** | ğŸ”´ é«˜å± | è¿½è¸ªæ•°æ®å®Œå…¨æš´éœ² |
| **Grafanaç®¡ç†Collector** | ğŸ”´ é«˜å± | é…ç½®è¢«ç¯¡æ”¹ |
| **Grafanaè®¿é—®æ§åˆ¶** | ğŸ”´ é«˜å± | æ‰€æœ‰ç”¨æˆ·æ•°æ®æ³„éœ² |
| **ä¸ä½¿ç”¨Grafana** | ğŸŸ¢ æ— é£é™© | ä¸å—å½±å“ |

**æ½œåœ¨åæœ**:

```text
1. æ•°æ®æ³„éœ²
   â”œâ”€ æ‰€æœ‰è¿½è¸ªæ•°æ®è¢«æŸ¥çœ‹
   â”œâ”€ æ•æ„Ÿä¸šåŠ¡ä¿¡æ¯æš´éœ²
   â””â”€ ç³»ç»Ÿæ¶æ„ä¿¡æ¯æ³„éœ²

2. ç³»ç»Ÿç ´å
   â”œâ”€ åˆ é™¤å†å²æ•°æ®
   â”œâ”€ ä¿®æ”¹ä»ªè¡¨æ¿é…ç½®
   â””â”€ å…³é—­å‘Šè­¦è§„åˆ™

3. åˆè§„é—®é¢˜
   â”œâ”€ GDPRè¿è§„ï¼ˆæ•°æ®æ³„éœ²ï¼‰
   â”œâ”€ HIPAAè¿è§„ï¼ˆåŒ»ç–—æ•°æ®ï¼‰
   â””â”€ PCI-DSSè¿è§„ï¼ˆæ”¯ä»˜æ•°æ®ï¼‰

4. ä¿¡ä»»æŸå®³
   â”œâ”€ å®¢æˆ·ä¿¡ä»»æµå¤±
   â”œâ”€ å“ç‰Œå£°èª‰å—æŸ
   â””â”€ å¯èƒ½é¢ä¸´æ³•å¾‹è¯‰è®¼
```

### ä¿®å¤æªæ–½

#### 1. ç«‹å³å‡çº§ï¼ˆğŸ”´ æœ€é«˜ä¼˜å…ˆçº§ï¼‰

**å®‰å…¨ç‰ˆæœ¬**:

```bash
# æ£€æŸ¥å½“å‰ç‰ˆæœ¬
grafana-server -v

# å¦‚æœç‰ˆæœ¬ä½äºä»¥ä¸‹ç‰ˆæœ¬ï¼Œç«‹å³å‡çº§ï¼š
Grafana 9.x â†’ 9.5.18+
Grafana 10.x â†’ 10.3.5+
Grafana 11.x â†’ 11.1.4+
```

**å‡çº§æ­¥éª¤**:

```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install grafana

# RHEL/CentOS
sudo yum update grafana

# Docker
docker pull grafana/grafana:11.1.4  # ä½¿ç”¨æœ€æ–°å®‰å…¨ç‰ˆæœ¬
docker stop grafana
docker run -d \
  --name grafana \
  -p 3000:3000 \
  grafana/grafana:11.1.4

# Helm (Kubernetes)
helm upgrade grafana grafana/grafana \
  --set image.tag=11.1.4 \
  --reuse-values
```

#### 2. ä¸´æ—¶ç¼“è§£æªæ–½ï¼ˆå¦‚æ— æ³•ç«‹å³å‡çº§ï¼‰

**ç½‘ç»œéš”ç¦»**:

```bash
# iptablesé™åˆ¶è®¿é—®
sudo iptables -A INPUT -p tcp --dport 3000 -s TRUSTED_IP -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 3000 -j DROP

# æˆ–ä½¿ç”¨nginxåå‘ä»£ç† + IPç™½åå•
```

**Nginxé…ç½®ç¤ºä¾‹**:

```nginx
upstream grafana {
    server localhost:3000;
}

server {
    listen 443 ssl;
    server_name grafana.company.com;
    
    # IPç™½åå•
    allow 10.0.0.0/8;      # å†…ç½‘
    allow 52.1.2.3;        # ç‰¹å®šå…¬ç½‘IP
    deny all;
    
    # é¢å¤–çš„å®‰å…¨headers
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    
    location / {
        proxy_pass http://grafana;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

#### 3. å¯ç”¨å¤šå› ç´ è®¤è¯ï¼ˆMFAï¼‰

**é…ç½®Grafana MFA**:

```ini
# /etc/grafana/grafana.ini

[auth]
# ç¦ç”¨åŒ¿åè®¿é—®
disable_login_form = false

[auth.anonymous]
enabled = false

[auth.generic_oauth]
# ä½¿ç”¨OAuthæä¾›å•†çš„MFA
enabled = true
client_id = YOUR_CLIENT_ID
client_secret = YOUR_CLIENT_SECRET
scopes = openid profile email
auth_url = https://auth.company.com/authorize
token_url = https://auth.company.com/token

[security]
# å¼ºåˆ¶æ‰€æœ‰ç”¨æˆ·ä½¿ç”¨MFA
admin_user = admin
admin_password = <strong-password>
# ç¦ç”¨å¯†ç ç™»å½•ï¼Œå¼ºåˆ¶OAuth+MFA
disable_initial_admin_creation = false
```

#### 4. å®¡è®¡å’Œç›‘æ§

**å¯ç”¨å®¡è®¡æ—¥å¿—**:

```ini
[log]
mode = console file
level = info

[log.file]
level = info
format = json
log_rotate = true
max_days = 30

[auditing]
enabled = true
log_dashboard_load = true
log_dashboard_save = true
```

**ç›‘æ§å¼‚å¸¸ç™»å½•**:

```bash
# æŸ¥æ‰¾å¯ç–‘ç™»å½•
grep "Failed login" /var/log/grafana/grafana.log | tail -50

# æŸ¥æ‰¾æƒé™æå‡
grep "role changed" /var/log/grafana/grafana.log

# æŸ¥æ‰¾å¼‚å¸¸APIè°ƒç”¨
grep "401\|403" /var/log/grafana/grafana.log | wc -l
```

### æ£€æµ‹æ˜¯å¦å·²è¢«æ”»å‡»

**æ£€æŸ¥æ¸…å•**:

```bash
# 1. æ£€æŸ¥ç”¨æˆ·åˆ—è¡¨ï¼ˆæ˜¯å¦æœ‰å¼‚å¸¸ç”¨æˆ·ï¼‰
curl -u admin:password http://localhost:3000/api/users

# 2. æ£€æŸ¥æœ€è¿‘ç™»å½•è®°å½•
grep "Successful login" /var/log/grafana/grafana.log | tail -100

# 3. æ£€æŸ¥ä»ªè¡¨æ¿ä¿®æ”¹å†å²
curl -u admin:password http://localhost:3000/api/dashboards/db/DASHBOARD_UID/versions

# 4. æ£€æŸ¥æ•°æ®æºé…ç½®ï¼ˆæ˜¯å¦è¢«ç¯¡æ”¹ï¼‰
curl -u admin:password http://localhost:3000/api/datasources

# 5. æ£€æŸ¥å‘Šè­¦è§„åˆ™ï¼ˆæ˜¯å¦è¢«ç¦ç”¨ï¼‰
curl -u admin:password http://localhost:3000/api/alert-notifications
```

**å¼‚å¸¸è¡Œä¸ºæŒ‡æ ‡**:

- âš ï¸  éå·¥ä½œæ—¶é—´çš„ç®¡ç†å‘˜ç™»å½•
- âš ï¸  æœªçŸ¥IPåœ°å€çš„è®¿é—®
- âš ï¸  å¤§é‡çš„APIè°ƒç”¨ï¼ˆæ•°æ®å¯¼å‡ºï¼‰
- âš ï¸  ä»ªè¡¨æ¿/æ•°æ®æºè¢«åˆ é™¤
- âš ï¸  ç”¨æˆ·æƒé™è¢«ä¿®æ”¹

---

## ğŸ›¡ï¸ å¤šå› ç´ è®¤è¯ï¼ˆMFAï¼‰ï¼š2025å¹´è¡Œä¸šæ–°æ ‡å‡†

### ä¸ºä»€ä¹ˆMFAæˆä¸ºå¼ºåˆ¶è¦æ±‚

**è¡Œä¸šè¶‹åŠ¿**:

```text
2024å¹´ï¼šMFAæ¨èä½†å¯é€‰
2025å¹´ï¼šMFAæˆä¸ºå¼ºåˆ¶è¦æ±‚

ä¸»è¦æ¨åŠ¨åŠ›ï¼š
â”œâ”€ Microsoftï¼ˆå¼ºåˆ¶åˆä½œä¼™ä¼´å¯ç”¨MFAï¼‰
â”œâ”€ AWSï¼ˆIAM MFAå¼ºåˆ¶ï¼‰
â”œâ”€ Google Cloudï¼ˆç»„ç»‡ç­–ç•¥MFAï¼‰
â””â”€ å„å›½ç›‘ç®¡è¦æ±‚ï¼ˆGDPRã€CCPAç­‰ï¼‰
```

**ç»Ÿè®¡æ•°æ®**:

```text
- 99.9%çš„è´¦æˆ·å…¥ä¾µå¯è¢«MFAé˜»æ­¢ï¼ˆMicrosoftï¼‰
- å¯†ç æ³„éœ²å¯¼è‡´81%çš„æ•°æ®æ³„éœ²ï¼ˆVerizon DBIRï¼‰
- MFAå¯å‡å°‘è´¦æˆ·æ¥ç®¡ï¼ˆATOï¼‰é£é™©99.9%
```

### OTLPç³»ç»Ÿçš„MFAå®æ–½

#### 1. OpenTelemetry Collectorè®¤è¯

**åŸºäºOAuth2 + MFAçš„Collectoré…ç½®**:

```yaml
# otel-collector-config-auth.yaml
extensions:
  oauth2:
    client_id: "otel-collector"
    client_secret: ${OAUTH2_CLIENT_SECRET}
    token_url: "https://auth.company.com/token"
    scopes: ["opentelemetry.write"]
    # MFAç”±OAuthæœåŠ¡å™¨å¼ºåˆ¶æ‰§è¡Œ

receivers:
  otlp:
    protocols:
      grpc:
        endpoint: 0.0.0.0:4317
        auth:
          authenticator: oauth2  # ä½¿ç”¨OAuth2è®¤è¯
      http:
        endpoint: 0.0.0.0:4318
        auth:
          authenticator: oauth2

service:
  extensions: [oauth2]
  pipelines:
    traces:
      receivers: [otlp]
      processors: [batch]
      exporters: [jaeger]
```

#### 2. åº”ç”¨SDKè®¤è¯

**Go SDK with OAuth2 + MFA**:

```go
package main

import (
    "context"
    "golang.org/x/oauth2/clientcredentials"
    
    "go.opentelemetry.io/otel/exporters/otlp/otlptrace/otlptracegrpc"
    "google.golang.org/grpc"
    "google.golang.org/grpc/credentials/oauth"
)

func main() {
    ctx := context.Background()
    
    // OAuth2å®¢æˆ·ç«¯å‡­æ®ï¼ˆéœ€è¦MFAé¢„æˆæƒï¼‰
    config := &clientcredentials.Config{
        ClientID:     "app-client-id",
        ClientSecret: "app-client-secret",
        TokenURL:     "https://auth.company.com/token",
        Scopes:       []string{"opentelemetry.write"},
    }
    
    // åˆ›å»ºå¸¦è®¤è¯çš„gRPCè¿æ¥
    conn, err := grpc.Dial(
        "collector:4317",
        grpc.WithPerRPCCredentials(
            oauth.NewOauthAccess(config.TokenSource(ctx)),
        ),
    )
    if err != nil {
        panic(err)
    }
    defer conn.Close()
    
    // åˆ›å»ºOTLPå¯¼å‡ºå™¨
    exporter, err := otlptracegrpc.New(ctx,
        otlptracegrpc.WithGRPCConn(conn),
    )
    // ...
}
```

#### 3. ç®¡ç†ç•Œé¢MFA

**Jaeger UI + MFAï¼ˆä½¿ç”¨OAuth2 Proxyï¼‰**:

```yaml
# docker-compose-jaeger-mfa.yml
version: '3.8'

services:
  oauth2-proxy:
    image: quay.io/oauth2-proxy/oauth2-proxy:latest
    command:
      - --provider=google
      - --email-domain=company.com
      - --upstream=http://jaeger-query:16686
      - --http-address=0.0.0.0:4180
      - --cookie-secret=YOUR_COOKIE_SECRET
      - --client-id=YOUR_CLIENT_ID
      - --client-secret=YOUR_CLIENT_SECRET
    ports:
      - "4180:4180"
    environment:
      - OAUTH2_PROXY_SKIP_PROVIDER_BUTTON=true
  
  jaeger-query:
    image: jaegertracing/jaeger-query:latest
    environment:
      - SPAN_STORAGE_TYPE=elasticsearch
    # ä¸ç›´æ¥æš´éœ²ç«¯å£ï¼Œåªé€šè¿‡oauth2-proxyè®¿é—®
```

### MFAå®æ–½æœ€ä½³å®è·µ

#### é€‰æ‹©MFAæ–¹æ³•

| æ–¹æ³• | å®‰å…¨æ€§ | ç”¨æˆ·ä½“éªŒ | æˆæœ¬ | æ¨èåº¦ |
|------|--------|---------|------|--------|
| **SMS** | â­â­ | â­â­â­â­ | ä½ | âŒ ä¸æ¨èï¼ˆSIMåŠ«æŒï¼‰ |
| **TOTPï¼ˆAuthenticator Appï¼‰** | â­â­â­â­ | â­â­â­ | å…è´¹ | âœ… æ¨è |
| **ç¡¬ä»¶ä»¤ç‰Œï¼ˆYubiKeyï¼‰** | â­â­â­â­â­ | â­â­ | ä¸­é«˜ | âœ… å¼ºçƒˆæ¨è |
| **ç”Ÿç‰©è¯†åˆ«** | â­â­â­â­ | â­â­â­â­â­ | é«˜ | âœ… æ¨èï¼ˆç§»åŠ¨ç«¯ï¼‰ |
| **Pushé€šçŸ¥** | â­â­â­â­ | â­â­â­â­â­ | ä¸­ | âœ… æ¨è |

#### éƒ¨ç½²ç­–ç•¥

**é˜¶æ®µæ€§éƒ¨ç½²**:

```text
Phase 1ï¼ˆWeek 1-2ï¼‰: ç®¡ç†å‘˜å¼ºåˆ¶MFA
â”œâ”€ æ‰€æœ‰ç®¡ç†å‘˜è´¦æˆ·
â”œâ”€ DevOpså›¢é˜Ÿ
â””â”€ å®‰å…¨å›¢é˜Ÿ

Phase 2ï¼ˆWeek 3-4ï¼‰: å¼€å‘è€…å¯ç”¨MFA
â”œâ”€ æœ‰ç”Ÿäº§ç¯å¢ƒè®¿é—®æƒé™çš„å¼€å‘è€…
â””â”€ æä¾›åŸ¹è®­å’Œæ”¯æŒ

Phase 3ï¼ˆWeek 5-6ï¼‰: å…¨å‘˜å¼ºåˆ¶MFA
â”œâ”€ æ‰€æœ‰å‘˜å·¥è´¦æˆ·
â””â”€ ç¦ç”¨éMFAç™»å½•

Phase 4ï¼ˆWeek 7+ï¼‰: å®¡è®¡å’Œä¼˜åŒ–
â”œâ”€ ç›‘æ§MFAä½¿ç”¨ç‡
â”œâ”€ å¤„ç†å¼‚å¸¸å’Œbypassè¯·æ±‚
â””â”€ æŒç»­æ”¹è¿›
```

#### åº”æ€¥è®¿é—®ï¼ˆBreak-Glassï¼‰

**ç´§æ€¥æƒ…å†µå¤„ç†**:

```bash
# åˆ›å»ºåº”æ€¥è´¦æˆ·ï¼ˆä»…åœ¨MFAæœåŠ¡æ•…éšœæ—¶ä½¿ç”¨ï¼‰
# 1. ç”Ÿæˆå¼ºå¯†ç 
openssl rand -base64 32

# 2. åˆ›å»ºåº”æ€¥è´¦æˆ·ï¼ˆå—ä¸¥æ ¼å®¡è®¡ï¼‰
# 3. å¯†ç å­˜å‚¨åœ¨ç‰©ç†ä¿é™©ç®±
# 4. æ¯æ¬¡ä½¿ç”¨åå¿…é¡»é‡ç½®å¯†ç 
```

**åº”æ€¥è®¿é—®æµç¨‹**:

```text
1. äº‹ä»¶å‘ç”Ÿ
   â†“
2. å®‰å…¨å›¢é˜Ÿæ‰¹å‡†
   â†“
3. ä¸¤äººåŒæ—¶åœ¨åœºï¼ˆåŒäººæ§åˆ¶ï¼‰
   â†“
4. ä½¿ç”¨åº”æ€¥è´¦æˆ·
   â†“
5. è®°å½•æ‰€æœ‰æ“ä½œ
   â†“
6. äº‹åå®¡è®¡å’Œå¯†ç é‡ç½®
```

---

## ğŸ” å…¶ä»–å®‰å…¨æœ€ä½³å®è·µ

### 1. æ•æ„Ÿæ•°æ®è„±æ•

**åœ¨Spanä¸­è‡ªåŠ¨è„±æ•PII**:

```go
package main

import (
    "go.opentelemetry.io/otel/attribute"
    sdktrace "go.opentelemetry.io/otel/sdk/trace"
)

// PIIè„±æ•å¤„ç†å™¨
type PIISanitizer struct{}

func (s *PIISanitizer) OnStart(parent context.Context, span sdktrace.ReadWriteSpan) {
    // åœ¨spanå¼€å§‹æ—¶è„±æ•
}

func (s *PIISanitizer) OnEnd(span sdktrace.ReadOnlySpan) {
    // æ£€æŸ¥å¹¶è„±æ•PIIå­—æ®µ
    attrs := span.Attributes()
    for _, attr := range attrs {
        key := string(attr.Key)
        
        // æ•æ„Ÿå­—æ®µåˆ—è¡¨
        if containsSensitiveField(key) {
            // æ›¿æ¢ä¸ºè„±æ•å€¼
            span.SetAttributes(attribute.String(key, "***REDACTED***"))
        }
        
        // æ£€æµ‹ä¿¡ç”¨å¡å·
        if isCreditCard(attr.Value.AsString()) {
            span.SetAttributes(attribute.String(key, maskCreditCard(attr.Value.AsString())))
        }
    }
}

func (s *PIISanitizer) Shutdown(ctx context.Context) error {
    return nil
}

// æ³¨å†Œå¤„ç†å™¨
tp := sdktrace.NewTracerProvider(
    sdktrace.WithSpanProcessor(&PIISanitizer{}),
    // ...
)
```

### 2. ç½‘ç»œåŠ å¯†

**TLSé…ç½®**:

```yaml
# otel-collectorå¼ºåˆ¶TLS
receivers:
  otlp:
    protocols:
      grpc:
        endpoint: 0.0.0.0:4317
        tls:
          cert_file: /certs/server.crt
          key_file: /certs/server.key
          client_ca_file: /certs/ca.crt
          # å¼ºåˆ¶å®¢æˆ·ç«¯è¯ä¹¦ï¼ˆmTLSï¼‰
          client_auth_type: RequireAndVerifyClientCert

exporters:
  otlp:
    endpoint: backend:4317
    tls:
      insecure: false
      cert_file: /certs/client.crt
      key_file: /certs/client.key
```

### 3. æœ€å°æƒé™åŸåˆ™

**RBACé…ç½®ç¤ºä¾‹**:

```yaml
# Kubernetes RBAC for Collector
apiVersion: rbac.authorization.k8s.io/v1
kind:ClusterRole
metadata:
  name: otel-collector
rules:
  # åªè¯»æƒé™
  - apiGroups: [""]
    resources: ["pods", "nodes"]
    verbs: ["get", "list", "watch"]
  
  # ç¦æ­¢å†™å…¥æƒé™
  # - apiGroups: [""]
  #   resources: ["pods"]
  #   verbs: ["create", "delete", "update"]
```

---

## ğŸ“‹ å®‰å…¨æ£€æŸ¥æ¸…å•

### ç«‹å³è¡ŒåŠ¨ï¼ˆæœ¬å‘¨ï¼‰

- [ ] **æ£€æŸ¥Grafanaç‰ˆæœ¬**
  - è¿è¡Œ `grafana-server -v`
  - å¦‚æœ < å®‰å…¨ç‰ˆæœ¬ï¼Œç«‹å³å‡çº§
  
- [ ] **å¯ç”¨Grafana MFA**
  - é…ç½®OAuth2æä¾›å•†
  - å¼ºåˆ¶æ‰€æœ‰ç”¨æˆ·ä½¿ç”¨MFA
  
- [ ] **å®¡è®¡è¿½è¸ªæ•°æ®**
  - æ£€æŸ¥æ˜¯å¦åŒ…å«PII/PHI
  - å®æ–½è‡ªåŠ¨è„±æ•

### çŸ­æœŸè¡ŒåŠ¨ï¼ˆæœ¬æœˆï¼‰

- [ ] **å®æ–½å…¨ç³»ç»ŸMFA**
  - Collectorè®¤è¯
  - ç®¡ç†ç•Œé¢è®¿é—®
  - APIè®¿é—®
  
- [ ] **å¯ç”¨TLS/mTLS**
  - Collector â†” Backend
  - SDK â†” Collector
  
- [ ] **ç½‘ç»œéš”ç¦»**
  - é™åˆ¶Collectorè®¿é—®
  - é˜²ç«å¢™è§„åˆ™
  - VPN/ä¸“çº¿

### é•¿æœŸè¡ŒåŠ¨ï¼ˆæŒç»­ï¼‰

- [ ] **å®‰å…¨åŸ¹è®­**
  - å¼€å‘è€…å®‰å…¨ç¼–ç 
  - è¿ç»´å›¢é˜Ÿå®‰å…¨æ“ä½œ
  
- [ ] **å®šæœŸå®¡è®¡**
  - æ¯æœˆå®‰å…¨å®¡è®¡
  - æ¸—é€æµ‹è¯•ï¼ˆæ¯å­£åº¦ï¼‰
  
- [ ] **äº‹ä»¶å“åº”è®¡åˆ’**
  - åˆ¶å®šåº”æ€¥é¢„æ¡ˆ
  - å®šæœŸæ¼”ç»ƒ

---

## ğŸ“š å‚è€ƒèµ„æº

### å®‰å…¨å…¬å‘Š

- [Grafana CVE-2025-6023è¯¦æƒ…](https://chinese.opswat.com/blog/grafana-cve-2025-6023)
- [Microsoft MFAè¦æ±‚](https://learn.microsoft.com/zh-cn/partner-center/announcements/2025-october)
- [OWASP Top 10 2025](https://owasp.org/www-project-top-ten/)

### æœ€ä½³å®è·µæŒ‡å—

- [NIST MFAæŒ‡å—](https://www.nist.gov/itl/applied-cybersecurity/tig/back-basics-multi-factor-authentication)
- [CIS Benchmark](https://www.cisecurity.org/cis-benchmarks/)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-10-18  
**ä¸‹æ¬¡æ›´æ–°**: æ¯æœˆæ›´æ–°ï¼Œæˆ–æœ‰é‡å¤§å®‰å…¨äº‹ä»¶æ—¶ç«‹å³æ›´æ–°  
**ç´§æ€¥è”ç³»**: <security@company.com>

**âš ï¸  å®‰å…¨æ˜¯æŒç»­çš„è¿‡ç¨‹ï¼Œä¸æ˜¯ä¸€æ¬¡æ€§ä»»åŠ¡ï¼**

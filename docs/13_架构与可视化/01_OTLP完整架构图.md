# OTLPå®Œæ•´æ¶æ„å›¾ä¸å¯è§†åŒ–

> **æœ€åæ›´æ–°**: 2025å¹´10æœˆ8æ—¥

---

## ğŸ“‹ ç›®å½•

- [OTLPå®Œæ•´æ¶æ„å›¾ä¸å¯è§†åŒ–](#otlpå®Œæ•´æ¶æ„å›¾ä¸å¯è§†åŒ–)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. OTLPæ•´ä½“æ¶æ„](#1-otlpæ•´ä½“æ¶æ„)
  - [2. æ•°æ®æµè½¬æ¶æ„](#2-æ•°æ®æµè½¬æ¶æ„)
  - [3. SDKæ¶æ„](#3-sdkæ¶æ„)
  - [4. Collectoræ¶æ„](#4-collectoræ¶æ„)
  - [5. ä¼ è¾“å±‚æ¶æ„](#5-ä¼ è¾“å±‚æ¶æ„)
  - [6. åˆ†å¸ƒå¼è¿½è¸ªæ¶æ„](#6-åˆ†å¸ƒå¼è¿½è¸ªæ¶æ„)
  - [7. é«˜å¯ç”¨æ¶æ„](#7-é«˜å¯ç”¨æ¶æ„)
  - [8. äº‘åŸç”Ÿéƒ¨ç½²æ¶æ„](#8-äº‘åŸç”Ÿéƒ¨ç½²æ¶æ„)
  - [9. æ•°æ®æ¨¡å‹å…³ç³»å›¾](#9-æ•°æ®æ¨¡å‹å…³ç³»å›¾)
  - [10. Contextä¼ æ’­æµç¨‹](#10-contextä¼ æ’­æµç¨‹)

---

## 1. OTLPæ•´ä½“æ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        OpenTelemetryæ¶æ„å…¨æ™¯                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åº”ç”¨å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Application â”‚  â”‚ Application â”‚  â”‚ Application â”‚    â”‚
â”‚  â”‚   (Go)      â”‚  â”‚  (Python)   â”‚  â”‚   (Java)    â”‚    â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚    â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚ â”‚  Tracer â”‚ â”‚  â”‚ â”‚  Tracer â”‚ â”‚  â”‚ â”‚  Tracer â”‚ â”‚    â”‚
â”‚  â”‚ â”‚  Meter  â”‚ â”‚  â”‚ â”‚  Meter  â”‚ â”‚  â”‚ â”‚  Meter  â”‚ â”‚    â”‚
â”‚  â”‚ â”‚  Logger â”‚ â”‚  â”‚ â”‚  Logger â”‚ â”‚  â”‚ â”‚  Logger â”‚ â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                 â”‚                 â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                 â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚       OpenTelemetry SDK          â”‚
          â”‚                                  â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
          â”‚  â”‚   TracerProvider         â”‚    â”‚
          â”‚  â”‚   MeterProvider          â”‚    â”‚
          â”‚  â”‚   LoggerProvider         â”‚    â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
          â”‚             â”‚                    â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
          â”‚  â”‚   Span Processor         â”‚    â”‚
          â”‚  â”‚   Metric Reader          â”‚    â”‚
          â”‚  â”‚   Log Processor          â”‚    â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
          â”‚             â”‚                    â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
          â”‚  â”‚      Exporter            â”‚    â”‚
          â”‚  â”‚   - OTLP (gRPC/HTTP)     â”‚    â”‚
          â”‚  â”‚   - Jaeger               â”‚    â”‚
          â”‚  â”‚   - Prometheus           â”‚    â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ OTLP Protocol
                        â”‚ (gRPC/HTTP)
                        â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   OpenTelemetry Collector        â”‚
          â”‚                                  â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
          â”‚  â”‚      Receivers             â”‚  â”‚
          â”‚  â”‚  - OTLP (gRPC/HTTP)        â”‚  â”‚
          â”‚  â”‚  - Jaeger                  â”‚  â”‚
          â”‚  â”‚  - Zipkin                  â”‚  â”‚
          â”‚  â”‚  - Prometheus              â”‚  â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
          â”‚             â”‚                    â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
          â”‚  â”‚      Processors            â”‚  â”‚
          â”‚  â”‚  - Batch                   â”‚  â”‚
          â”‚  â”‚  - Memory Limiter          â”‚  â”‚
          â”‚  â”‚  - Attributes              â”‚  â”‚
          â”‚  â”‚  - Tail Sampling           â”‚  â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
          â”‚             â”‚                    â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
          â”‚  â”‚      Exporters             â”‚  â”‚
          â”‚  â”‚  - OTLP                    â”‚  â”‚
          â”‚  â”‚  - Jaeger                  â”‚  â”‚
          â”‚  â”‚  - Prometheus              â”‚  â”‚
          â”‚  â”‚  - Elasticsearch           â”‚  â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                               â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Jaeger        â”‚           â”‚  Prometheus       â”‚
  â”‚  (Traces)      â”‚           â”‚  (Metrics)        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                               â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Elasticsearch  â”‚           â”‚   Grafana         â”‚
  â”‚  (Storage)     â”‚           â”‚ (Visualization)   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. æ•°æ®æµè½¬æ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ•°æ®æµè½¬å…¨é“¾è·¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

åº”ç”¨äº§ç”Ÿé¥æµ‹æ•°æ®:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Application  â”‚
â”‚              â”‚
â”‚ tracer.Start â”‚ â”€â”€â”€â”
â”‚ meter.Record â”‚    â”‚
â”‚ logger.Log   â”‚    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                    â”‚
              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
              â”‚   In-App   â”‚
              â”‚   Buffer   â”‚
              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
              â”‚   Batch    â”‚
              â”‚ Processor  â”‚
              â”‚            â”‚
              â”‚ - æ‰¹é‡èšåˆ  â”‚
              â”‚ - å‹ç¼©     â”‚
              â”‚ - é‡‡æ ·     â”‚
              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ OTLP Export
                    â”‚ (gRPC/HTTP)
                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Agent Collector (æœ¬åœ°)          â”‚
â”‚                                        â”‚
â”‚  åŠŸèƒ½:                                  â”‚
â”‚  - æ¥æ”¶æœ¬åœ°åº”ç”¨æ•°æ®                     â”‚
â”‚  - åˆæ­¥å¤„ç†                            â”‚
â”‚  - æœ¬åœ°ç¼“å†²                            â”‚
â”‚  - ç½‘ç»œæ–­è¿ä¿æŠ¤                        â”‚
â”‚                                        â”‚
â”‚  éƒ¨ç½²: DaemonSet (K8s)                 â”‚
â”‚        æˆ– Sidecar                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ OTLP Forward
                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Gateway Collector (é›†ä¸­)          â”‚
â”‚                                        â”‚
â”‚  åŠŸèƒ½:                                  â”‚
â”‚  - é›†ä¸­å¤„ç†                             â”‚
â”‚  - Tail Sampling                       â”‚
â”‚  - æ•°æ®èšåˆ                             â”‚
â”‚  - å¤šåç«¯è·¯ç”±                           â”‚
â”‚  - æˆæœ¬æ§åˆ¶                             â”‚
â”‚                                        â”‚
â”‚  éƒ¨ç½²: Deployment (3+ replicas)         â”‚
â”‚        è´Ÿè½½å‡è¡¡                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           â”‚           â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚ Jaeger  â”‚ â”‚ Prom   â”‚ â”‚  ES    â”‚
   â”‚(Traces) â”‚ â”‚(Metrics)â”‚ â”‚(Logs) â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚           â”‚           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
              â”‚  Grafana   â”‚
              â”‚ Dashboard  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ•°æ®é‡å˜åŒ–:
Application:    100K spans/s
â†“ (é‡‡æ ·1%)
Agent:          1K spans/s
â†“ (æ‰¹å¤„ç†+å‹ç¼©)
Gateway:        1K spans/s (ä½†ç½‘ç»œæµé‡â†“70%)
â†“ (Tail Sampling)
Backend:        100 spans/s (åªå­˜å‚¨é‡è¦æ•°æ®)
```

---

## 3. SDKæ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ OpenTelemetry SDKæ¶æ„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        API Layer                              â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ Tracer   â”‚    â”‚  Meter   â”‚    â”‚  Logger  â”‚                 â”‚
â”‚  â”‚   API    â”‚    â”‚   API    â”‚    â”‚   API    â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚               â”‚               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       â”‚               â”‚               â”‚     SDK Layer       â”‚
â”‚       â”‚               â”‚               â”‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚TracerProviderâ”‚â”‚MeterProvider â”‚â”‚LoggerProviderâ”‚           â”‚
â”‚  â”‚              â”‚â”‚              â”‚â”‚              â”‚           â”‚
â”‚  â”‚ - Resource   â”‚â”‚ - Resource   â”‚â”‚ - Resource   â”‚           â”‚
â”‚  â”‚ - Sampler    â”‚â”‚ - Views      â”‚â”‚ - Processor  â”‚           â”‚
â”‚  â”‚ - Processor  â”‚â”‚ - Reader     â”‚â”‚              â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚       â”‚              â”‚              â”‚                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚Span          â”‚â”‚Metric        â”‚â”‚Log          â”‚            â”‚
â”‚  â”‚Processor     â”‚â”‚Reader        â”‚â”‚Processor    â”‚            â”‚
â”‚  â”‚              â”‚â”‚              â”‚â”‚             â”‚            â”‚
â”‚  â”‚ - Simple     â”‚â”‚ - Periodic   â”‚â”‚ - Simple    â”‚            â”‚
â”‚  â”‚ - Batch      â”‚â”‚ - Manual     â”‚â”‚ - Batch     â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚       â”‚              â”‚              â”‚                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚Span          â”‚â”‚Metric        â”‚â”‚Log          â”‚            â”‚
â”‚  â”‚Exporter      â”‚â”‚Exporter      â”‚â”‚Exporter     â”‚            â”‚
â”‚  â”‚              â”‚â”‚              â”‚â”‚             â”‚            â”‚
â”‚  â”‚ - OTLP       â”‚â”‚ - OTLP       â”‚â”‚ - OTLP      â”‚            â”‚
â”‚  â”‚ - Jaeger     â”‚â”‚ - Prometheus â”‚â”‚ - Stdout    â”‚            â”‚
â”‚  â”‚ - Zipkin     â”‚â”‚ - Stdout     â”‚â”‚             â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                  â”‚ Collector  â”‚
                  â”‚  Backend   â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç»„ä»¶äº¤äº’:
1. Application â†’ Tracer.Start()
2. Tracer â†’ Create Span
3. Span â†’ SpanProcessor.OnStart()
4. Application â†’ Span.End()
5. Span â†’ SpanProcessor.OnEnd()
6. SpanProcessor â†’ Batch & Export
7. Exporter â†’ Send to Collector/Backend
```

---

## 4. Collectoræ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ OpenTelemetry Collectorè¯¦ç»†æ¶æ„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Receivers                           â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  OTLP    â”‚  â”‚ Jaeger   â”‚  â”‚ Zipkin   â”‚  â”‚Prometheusâ”‚     â”‚
â”‚  â”‚  gRPC    â”‚  â”‚          â”‚  â”‚          â”‚  â”‚  Scrape  â”‚     â”‚
â”‚  â”‚  :4317   â”‚  â”‚  :14250  â”‚  â”‚  :9411   â”‚  â”‚  :9090   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â”‚
â”‚       â”‚             â”‚             â”‚             â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚             â”‚             â”‚             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Processors                             â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  1. Memory Limiter                                 â”‚    â”‚
â”‚  â”‚     - ä¿æŠ¤: é˜²æ­¢OOM                                â”‚    â”‚
â”‚  â”‚     - æ£€æŸ¥é—´éš”: 1s                                 â”‚    â”‚
â”‚  â”‚     - é™åˆ¶: 2GB                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                        â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  2. Attributes Processor                            â”‚   â”‚
â”‚  â”‚     - åˆ é™¤PII                                       â”‚   â”‚
â”‚  â”‚     - æ·»åŠ æ ‡ç­¾                                      â”‚   â”‚
â”‚  â”‚     - è½¬æ¢å±æ€§                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                        â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  3. Batch Processor                                 â”‚   â”‚
â”‚  â”‚     - æ‰¹é‡å¤§å°: 8192                                â”‚   â”‚
â”‚  â”‚     - è¶…æ—¶: 200ms                                   â”‚   â”‚
â”‚  â”‚     - å‡å°‘ç½‘ç»œè°ƒç”¨                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                        â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  4. Tail Sampling (å¯é€‰)                            â”‚   â”‚
â”‚  â”‚     - ç­‰å¾…: 10s                                     â”‚   â”‚
â”‚  â”‚     - ç­–ç•¥:                                         â”‚   â”‚
â”‚  â”‚       â€¢ æ‰€æœ‰é”™è¯¯                                    â”‚   â”‚
â”‚  â”‚       â€¢ æ…¢è¯·æ±‚ (>1s)                                â”‚   â”‚
â”‚  â”‚       â€¢ éšæœº1%                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Exporters                             â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  OTLP    â”‚  â”‚ Jaeger   â”‚  â”‚Prometheusâ”‚  â”‚ Elastic  â”‚     â”‚
â”‚  â”‚          â”‚  â”‚          â”‚  â”‚  Remote  â”‚  â”‚  Search  â”‚     â”‚
â”‚  â”‚  :4317   â”‚  â”‚  :14250  â”‚  â”‚  Write   â”‚  â”‚  :9200   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚             â”‚             â”‚             â”‚
        â–¼             â–¼             â–¼             â–¼
    Backend       Jaeger      Prometheus    Elasticsearch

Pipelineé…ç½®:
traces:
  receivers: [otlp, jaeger, zipkin]
  processors: [memory_limiter, attributes, batch, tail_sampling]
  exporters: [otlp/jaeger, elasticsearch]

metrics:
  receivers: [otlp, prometheus]
  processors: [memory_limiter, batch]
  exporters: [prometheus]

logs:
  receivers: [otlp]
  processors: [memory_limiter, batch]
  exporters: [elasticsearch]
```

---

## 5. ä¼ è¾“å±‚æ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ OTLPä¼ è¾“å±‚è¯¦ç»†æ¶æ„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

gRPCä¼ è¾“:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      gRPC/HTTP2 Stack                        â”‚
â”‚                                                              â”‚
â”‚  Application                                                 â”‚
â”‚       â”‚                                                      â”‚
â”‚       â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚  â”‚ Protobuf Encode â”‚  Span â†’ bytes                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚           â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚  â”‚  gRPC Channel   â”‚  Multiplexing, Flow Control             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚           â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚  â”‚   HTTP/2 Frame  â”‚  HEADERS, DATA frames                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚           â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚  â”‚   Compression   â”‚  gzip (optional)                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚           â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚  â”‚      TLS        â”‚  Encryption                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚           â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚  â”‚      TCP        â”‚  Reliable Transport                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚           â”‚                                                  â”‚
â”‚           â–¼                                                  â”‚
â”‚        Network                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

HTTP/1.1ä¼ è¾“:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     HTTP/1.1 Stack                           â”‚
â”‚                                                              â”‚
â”‚  Application                                                 â”‚
â”‚       â”‚                                                      â”‚
â”‚       â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚  â”‚ Protobuf/JSON   â”‚  Span â†’ bytes/JSON                      â”‚
â”‚  â”‚    Encode       â”‚                                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚           â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚  â”‚  HTTP Request   â”‚  POST /v1/traces                        â”‚
â”‚  â”‚  Content-Type   â”‚  application/x-protobuf                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚           â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚  â”‚   Compression   â”‚  gzip (optional)                        â”‚
â”‚  â”‚  Content-Encodingâ”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚           â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚  â”‚      TLS        â”‚  HTTPS                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚           â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚  â”‚      TCP        â”‚                                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚           â”‚                                                  â”‚
â”‚           â–¼                                                  â”‚
â”‚        Network                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ€§èƒ½å¯¹æ¯”:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æŒ‡æ ‡       â”‚ gRPC     â”‚ HTTP/1.1 â”‚ å·®å¼‚      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å»¶è¿Ÿ       â”‚ 10-20ms  â”‚ 15-30ms  â”‚ ~50%     â”‚
â”‚ ååé‡     â”‚ 10K/s    â”‚ 5K/s     â”‚ 2x        â”‚
â”‚ CPUä½¿ç”¨    â”‚ 30%      â”‚ 45%      â”‚ 1.5x      â”‚
â”‚ è¿æ¥å¤ç”¨   â”‚ âœ…       â”‚ âŒ       â”‚ Better   â”‚
â”‚ æµå¼ä¼ è¾“   â”‚ âœ…       â”‚ âŒ       â”‚ Yes      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. åˆ†å¸ƒå¼è¿½è¸ªæ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åˆ†å¸ƒå¼è¿½è¸ªå®Œæ•´é“¾è·¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

ç”¨æˆ·è¯·æ±‚æµç¨‹:

Browser/Client
     â”‚
     â”‚ HTTP GET /checkout
     â”‚ traceparent: 00-4bf92f...
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Gateway       â”‚ Span 1: GET /checkout
â”‚  (Node.js)         â”‚ trace_id: 4bf92f...
â”‚                    â”‚ span_id: 00f067...
â”‚  tracer.Start()    â”‚ parent_id: null
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ HTTP POST /orders
          â”‚ traceparent: 00-4bf92f...-00f067...-01
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Order Service     â”‚ Span 2: POST /orders
â”‚  (Go)              â”‚ trace_id: 4bf92f...
â”‚                    â”‚ span_id: a1b2c3...
â”‚  tracer.Start()    â”‚ parent_id: 00f067...
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚             â”‚              â”‚
          â–¼             â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Payment     â”‚ â”‚  Inventory   â”‚ â”‚  Database    â”‚
â”‚  Service     â”‚ â”‚  Service     â”‚ â”‚  Query       â”‚
â”‚  (Python)    â”‚ â”‚  (Java)      â”‚ â”‚              â”‚
â”‚              â”‚ â”‚              â”‚ â”‚              â”‚
â”‚  Span 3      â”‚ â”‚  Span 4      â”‚ â”‚  Span 5      â”‚
â”‚  parent: 2   â”‚ â”‚  parent: 2   â”‚ â”‚  parent: 2   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Trace Tree:
Span 1 (API Gateway)
  â””â”€ Span 2 (Order Service)
       â”œâ”€ Span 3 (Payment Service)
       â”œâ”€ Span 4 (Inventory Service)
       â””â”€ Span 5 (Database Query)

Trace Timeline:
Time â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
0ms  100ms  200ms  300ms  400ms  500ms  600ms  700ms

Span 1 [==================================] 700ms
         Span 2 [========================] 600ms
                 Span 3 [======] 200ms
                 Span 4 [========] 250ms
                 Span 5 [====] 150ms

Context Propagation:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service A   â”‚
â”‚ trace_id=123â”‚
â”‚ span_id=001 â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ HTTP Header:
       â”‚ traceparent: 00-123-001-01
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service B   â”‚
â”‚ trace_id=123â”‚ (ç»§æ‰¿)
â”‚ span_id=002 â”‚ (æ–°ç”Ÿæˆ)
â”‚ parent=001  â”‚ (ä»header)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. é«˜å¯ç”¨æ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç”Ÿäº§ç¯å¢ƒé«˜å¯ç”¨æ¶æ„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Kubernetes Cluster                   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Application Pods (DaemonSet/Deployment)         â”‚   â”‚
â”‚  â”‚                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚ App â”‚  â”‚ App â”‚  â”‚ App â”‚  â”‚ App â”‚  â”‚ App â”‚     â”‚   â”‚
â”‚  â”‚  â”‚ +SDKâ”‚  â”‚ +SDKâ”‚  â”‚ +SDKâ”‚  â”‚ +SDKâ”‚  â”‚ +SDKâ”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”‚   â”‚
â”‚        â”‚        â”‚        â”‚        â”‚        â”‚            â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                          â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Agent Collector (DaemonSet)                     â”‚   â”‚
â”‚  â”‚  - æ¯ä¸ªNodeä¸€ä¸ªå®ä¾‹                               â”‚   â”‚
â”‚  â”‚  - æœ¬åœ°ç¼“å­˜                                       â”‚   â”‚
â”‚  â”‚  - æ–­çº¿ä¿æŠ¤                                       â”‚   â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”               â”‚  â”‚
â”‚  â”‚  â”‚Agentâ”‚  â”‚Agentâ”‚  â”‚Agentâ”‚  â”‚Agentâ”‚               â”‚  â”‚
â”‚  â”‚  â”‚  1  â”‚  â”‚  2  â”‚  â”‚  3  â”‚  â”‚  4  â”‚               â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   â”‚
â”‚        â”‚        â”‚        â”‚        â”‚                     â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                          â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Load Balancer (Service)                         â”‚   â”‚
â”‚  â”‚  - Round Robin                                   â”‚   â”‚
â”‚  â”‚  - Health Check                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Gateway Collector (Deployment, 3 replicas)      â”‚   â”‚
â”‚  â”‚  - é›†ä¸­å¤„ç†                                       â”‚   â”‚
â”‚  â”‚  - Tail Sampling                                 â”‚   â”‚
â”‚  â”‚  - é«˜å¯ç”¨                                        â”‚   â”‚
â”‚  â”‚                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”                       â”‚   â”‚
â”‚  â”‚  â”‚ GW1 â”‚  â”‚ GW2 â”‚  â”‚ GW3 â”‚                       â”‚   â”‚
â”‚  â”‚  â”‚ AZ-Aâ”‚  â”‚ AZ-Bâ”‚  â”‚ AZ-Câ”‚  (è·¨å¯ç”¨åŒº)            â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚        â”‚        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                           â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚ Jaeger â”‚              â”‚ Prometheus â”‚
â”‚   HA   â”‚              â”‚     HA     â”‚
â”‚        â”‚              â”‚            â”‚
â”‚ â”Œâ”€â”€â”€â”€â” â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Collectorâ”‚          â”‚ â”‚ Server â”‚ â”‚
â”‚ â”‚   x3 â”‚              â”‚ â”‚   x2   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”˜ â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚        â”‚              â”‚            â”‚
â”‚ â”Œâ”€â”€â”€â”€â” â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â”‚ ES â”‚ â”‚
â”‚ â”‚Clusterâ”‚
â”‚ â”‚  x5  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ•…éšœå®¹å¿:
- Agentæ•…éšœ: åº”ç”¨åˆ‡æ¢åˆ°å…¶ä»–Agent
- Gatewayæ•…éšœ: LoadBalancerè‡ªåŠ¨åˆ‡æ¢
- Backendæ•…éšœ: æ•°æ®åœ¨Collectorç¼“å†²
- ç½‘ç»œåˆ†åŒº: æœ¬åœ°ç¼“å­˜ä¿æŠ¤

æ‰©å±•ç­–ç•¥:
- Agent: éšNodeè‡ªåŠ¨æ‰©å±• (DaemonSet)
- Gateway: æ ¹æ®CPU/Memory HPA
- Backend: æ ¹æ®æ•°æ®é‡æ‰‹åŠ¨æ‰©å±•
```

---

## 8. äº‘åŸç”Ÿéƒ¨ç½²æ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Kuberneteséƒ¨ç½²æ¶æ„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

Namespace: observability

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ConfigMaps & Secrets                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Collector    â”‚  â”‚ TLS Certs     â”‚        â”‚
â”‚  â”‚ Config       â”‚  â”‚ API Keys      â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent Collectors (DaemonSet)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  apiVersion: apps/v1                 â”‚   â”‚
â”‚  â”‚  kind: DaemonSet                     â”‚   â”‚
â”‚  â”‚  metadata:                           â”‚   â”‚
â”‚  â”‚    name: otel-agent                  â”‚   â”‚
â”‚  â”‚  spec:                               â”‚   â”‚
â”‚  â”‚    template:                         â”‚   â”‚
â”‚  â”‚      spec:                           â”‚   â”‚
â”‚  â”‚        containers:                   â”‚   â”‚
â”‚  â”‚        - name: otel-collector        â”‚   â”‚
â”‚  â”‚          image: otel/collector:0.9   â”‚   â”‚
â”‚  â”‚          ports:                      â”‚   â”‚
â”‚  â”‚          - containerPort: 4317       â”‚   â”‚
â”‚  â”‚          - containerPort: 4318       â”‚   â”‚
â”‚  â”‚          resources:                  â”‚   â”‚
â”‚  â”‚            requests:                 â”‚   â”‚
â”‚  â”‚              cpu: 200m               â”‚   â”‚
â”‚  â”‚              memory: 256Mi           â”‚   â”‚
â”‚  â”‚            limits:                   â”‚   â”‚
â”‚  â”‚              cpu: 500m               â”‚   â”‚
â”‚  â”‚              memory: 512Mi           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Gateway Collectors (Deployment)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  apiVersion: apps/v1                 â”‚  â”‚
â”‚  â”‚  kind: Deployment                    â”‚  â”‚
â”‚  â”‚  metadata:                           â”‚  â”‚
â”‚  â”‚    name: otel-gateway                â”‚  â”‚
â”‚  â”‚  spec:                               â”‚  â”‚
â”‚  â”‚    replicas: 3                       â”‚  â”‚
â”‚  â”‚    strategy:                         â”‚  â”‚
â”‚  â”‚      type: RollingUpdate             â”‚  â”‚
â”‚  â”‚      rollingUpdate:                  â”‚  â”‚
â”‚  â”‚        maxSurge: 1                   â”‚  â”‚
â”‚  â”‚        maxUnavailable: 0             â”‚  â”‚
â”‚  â”‚    template:                         â”‚  â”‚
â”‚  â”‚      spec:                           â”‚  â”‚
â”‚  â”‚        affinity:                     â”‚  â”‚
â”‚  â”‚          podAntiAffinity:            â”‚  â”‚
â”‚  â”‚            requiredDuringScheduling..â”‚  â”‚
â”‚  â”‚        containers:                   â”‚  â”‚
â”‚  â”‚        - name: otel-collector        â”‚  â”‚
â”‚  â”‚          image: otel/collector:0.9   â”‚  â”‚
â”‚  â”‚          resources:                  â”‚  â”‚
â”‚  â”‚            requests:                 â”‚  â”‚
â”‚  â”‚              cpu: 1000m              â”‚  â”‚
â”‚  â”‚              memory: 2Gi             â”‚  â”‚
â”‚  â”‚            limits:                   â”‚  â”‚
â”‚  â”‚              cpu: 2000m              â”‚  â”‚
â”‚  â”‚              memory: 4Gi             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Services                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Agent Service (ClusterIP)           â”‚  â”‚
â”‚  â”‚  - Headless for direct access        â”‚  â”‚
â”‚  â”‚                                      â”‚  â”‚
â”‚  â”‚  Gateway Service (LoadBalancer)      â”‚  â”‚
â”‚  â”‚  - External access                   â”‚  â”‚
â”‚  â”‚  - Load balancing                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HorizontalPodAutoscaler                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Gateway HPA:                        â”‚  â”‚
â”‚  â”‚  - Target: CPU 70%                   â”‚  â”‚
â”‚  â”‚  - Min: 3                            â”‚  â”‚
â”‚  â”‚  - Max: 10                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PodDisruptionBudget                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Gateway PDB:                        â”‚  â”‚
â”‚  â”‚  - minAvailable: 2                   â”‚  â”‚
â”‚  â”‚  (ä¿è¯è‡³å°‘2ä¸ªpodè¿è¡Œ)                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. æ•°æ®æ¨¡å‹å…³ç³»å›¾

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ OTLPæ•°æ®æ¨¡å‹å…³ç³»å›¾ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

ResourceSpans (æ ¹å¯¹è±¡)
  â”‚
  â”œâ”€ Resource (1ä¸ª)
  â”‚   â””â”€ Attributes (Map<string, AnyValue>)
  â”‚       â”œâ”€ service.name
  â”‚       â”œâ”€ service.version
  â”‚       â”œâ”€ deployment.environment
  â”‚       â””â”€ ...
  â”‚
  â””â”€ ScopeSpans (å¤šä¸ª)
      â”‚
      â”œâ”€ Scope (instrumentation library)
      â”‚   â”œâ”€ name
      â”‚   â””â”€ version
      â”‚
      â””â”€ Spans (å¤šä¸ª)
          â”‚
          â”œâ”€ trace_id (16 bytes)
          â”œâ”€ span_id (8 bytes)
          â”œâ”€ parent_span_id (8 bytes, optional)
          â”œâ”€ name (string)
          â”œâ”€ kind (SpanKind enum)
          â”œâ”€ start_time_unix_nano (uint64)
          â”œâ”€ end_time_unix_nano (uint64)
          â”œâ”€ attributes (Map)
          â”‚   â”œâ”€ http.method
          â”‚   â”œâ”€ http.status_code
          â”‚   â””â”€ ...
          â”œâ”€ events (list)
          â”‚   â””â”€ Event
          â”‚       â”œâ”€ time_unix_nano
          â”‚       â”œâ”€ name
          â”‚       â””â”€ attributes
          â”œâ”€ links (list)
          â”‚   â””â”€ Link
          â”‚       â”œâ”€ trace_id
          â”‚       â”œâ”€ span_id
          â”‚       â””â”€ attributes
          â””â”€ status
              â”œâ”€ code (OK/ERROR/UNSET)
              â””â”€ message

å…³ç³»:
Resource (1) â”€â”€â”€< ScopeSpans (N)
ScopeSpans (1) â”€â”€â”€< Spans (N)
Span (1) â”€â”€â”€< Events (N)
Span (1) â”€â”€â”€< Links (N)

Spanå…³è”:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Span A  â”‚â”€â”€â”€â”€â”€â”€>â”‚ Span B  â”‚
â”‚trace_id â”‚       â”‚trace_id â”‚ (same)
â”‚span_id=1â”‚       â”‚span_id=2â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚parent=1 â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 10. Contextä¼ æ’­æµç¨‹

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Contextä¼ æ’­è¯¦ç»†æµç¨‹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

Service A â†’ Service Bä¼ æ’­:

Service A (Go):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ func makeRequest(ctx context.Context) {    â”‚
â”‚                                            â”‚
â”‚   // 1. åˆ›å»ºSpan                           â”‚
â”‚   ctx, span := tracer.Start(ctx, "req")    â”‚
â”‚   defer span.End()                         â”‚
â”‚                                            â”‚
â”‚   // 2. åˆ›å»ºHTTPè¯·æ±‚                       â”‚
â”‚   req, _ := http.NewRequestWithContext(   â”‚
â”‚       ctx, "GET", url, nil)               â”‚
â”‚                                            â”‚
â”‚   // 3. æ³¨å…¥Contextåˆ°Headers               â”‚
â”‚   propagator.Inject(ctx,                  â”‚
â”‚       propagation.HeaderCarrier(          â”‚
â”‚           req.Header))                     â”‚
â”‚                                            â”‚
â”‚   // req.Headerç°åœ¨åŒ…å«:                    â”‚
â”‚   // traceparent: 00-4bf92f...-001-01      â”‚
â”‚   // tracestate: ...                       â”‚
â”‚   // baggage: key1=value1                  â”‚
â”‚                                            â”‚
â”‚   // 4. å‘é€è¯·æ±‚                            â”‚
â”‚   client.Do(req)                           â”‚
â”‚ }                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ HTTP Request
         â”‚ Headers:
         â”‚ - traceparent
         â”‚ - tracestate
         â”‚ - baggage
         â”‚
         â–¼
Service B (Python):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ @app.route('/api')                         â”‚
â”‚ def handler():                             â”‚
â”‚{                                           â”‚
â”‚   // 1. æå–Contextä»Headers                â”‚
â”‚   ctx = extract(request.headers)           â”‚
â”‚                                            â”‚
â”‚   // ctxç°åœ¨åŒ…å«:                           â”‚
â”‚   // - trace_id (from traceparent)         â”‚
â”‚   // - span_id (from traceparent)          â”‚
â”‚   // - baggage                             â”‚
â”‚                                            â”‚
â”‚   // 2. åˆ›å»ºSpan (è‡ªåŠ¨å…³è”çˆ¶Span)           â”‚
â”‚   with tracer.start_as_current_span(       â”‚
â”‚       "handler", context=ctx):             â”‚
â”‚                                            â”‚
â”‚       // 3. ä¸šåŠ¡é€»è¾‘                        â”‚
â”‚       result = process()                   â”‚
â”‚                                            â”‚
â”‚       return result                        â”‚
â”‚ }                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç»“æœTrace:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Trace: 4bf92f...                    â”‚
â”‚                                     â”‚
â”‚ Span 1 (Service A, Go)              â”‚
â”‚ â”œâ”€ span_id: 001                     â”‚
â”‚ â”œâ”€ parent_id: null                  â”‚
â”‚ â””â”€ duration: 150ms                  â”‚
â”‚     â”‚                               â”‚
â”‚     â””â”€ Span 2 (Service B, Python)   â”‚
â”‚        â”œâ”€ span_id: 002              â”‚
â”‚        â”œâ”€ parent_id: 001            â”‚
â”‚        â””â”€ duration: 100ms           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

W3C Trace Context Format:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ traceparent:                             â”‚
â”‚ 00-4bf92f3577b34da6a3ce929d0e0e4736-     â”‚
â”‚    00f067aa0ba902b7-01                   â”‚
â”‚    â”‚  â”‚                â”‚           â”‚     â”‚
â”‚    â”‚  â”‚                â”‚           â””â”€ flags
â”‚    â”‚  â”‚                â””â”€ parent_id      â”‚
â”‚    â”‚  â””â”€ trace_id                        â”‚
â”‚    â””â”€ version                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**æ–‡æ¡£çŠ¶æ€**: âœ… å®Œæˆ
**å®¡æ ¸çŠ¶æ€**: å¾…å®¡æ ¸
**ç”¨é€”**: æ¶æ„è®¾è®¡å‚è€ƒã€æŠ€æœ¯åˆ†äº«ã€æ–‡æ¡£è¯´æ˜

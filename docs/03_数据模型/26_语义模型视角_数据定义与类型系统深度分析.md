# OTLPè¯­ä¹‰æ¨¡å‹è§†è§’ï¼šæ•°æ®å®šä¹‰ä¸ç±»å‹ç³»ç»Ÿæ·±åº¦åˆ†æ

> **æ–‡æ¡£ç±»å‹**: æ•°æ®æ¨¡å‹æ·±åº¦åˆ†æ
> **åˆ†æç»´åº¦**: è¯­ä¹‰æ¨¡å‹è§†è§’ - æ•°æ®å®šä¹‰ä¸ç±»å‹ç³»ç»Ÿ
> **åˆ›å»ºæ—¥æœŸ**: 2025å¹´10æœˆ11æ—¥
> **æ–‡æ¡£çŠ¶æ€**: âœ… å®Œæˆ

---

## ğŸ“‹ ç›®å½•

- [OTLPè¯­ä¹‰æ¨¡å‹è§†è§’ï¼šæ•°æ®å®šä¹‰ä¸ç±»å‹ç³»ç»Ÿæ·±åº¦åˆ†æ](#otlpè¯­ä¹‰æ¨¡å‹è§†è§’æ•°æ®å®šä¹‰ä¸ç±»å‹ç³»ç»Ÿæ·±åº¦åˆ†æ)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [ğŸ¯ æ‰§è¡Œæ‘˜è¦](#-æ‰§è¡Œæ‘˜è¦)
    - [ç±»å‹ç³»ç»Ÿå…¨æ™¯](#ç±»å‹ç³»ç»Ÿå…¨æ™¯)
  - [ğŸ“Š ç±»å‹ç³»ç»Ÿå…¨æ™¯](#-ç±»å‹ç³»ç»Ÿå…¨æ™¯)
    - [ç±»å‹å±‚æ¬¡ç»“æ„](#ç±»å‹å±‚æ¬¡ç»“æ„)
  - [ğŸ”¢ åŸºç¡€ç±»å‹ç³»ç»Ÿ](#-åŸºç¡€ç±»å‹ç³»ç»Ÿ)
    - [Stringç±»å‹](#stringç±»å‹)
    - [Numberç±»å‹](#numberç±»å‹)
    - [Booleanç±»å‹](#booleanç±»å‹)
    - [Bytesç±»å‹](#bytesç±»å‹)
  - [ğŸ“¦ å¤åˆç±»å‹ç³»ç»Ÿ](#-å¤åˆç±»å‹ç³»ç»Ÿ)
    - [KeyValueç±»å‹](#keyvalueç±»å‹)
    - [AnyValueç±»å‹](#anyvalueç±»å‹)
    - [Arrayç±»å‹](#arrayç±»å‹)
  - [ğŸ·ï¸ è¯­ä¹‰ç±»å‹ç³»ç»Ÿ](#ï¸-è¯­ä¹‰ç±»å‹ç³»ç»Ÿ)
    - [SpanKindç±»å‹](#spankindç±»å‹)
    - [StatusCodeç±»å‹](#statuscodeç±»å‹)
    - [SeverityNumberç±»å‹](#severitynumberç±»å‹)
  - [ğŸ“ˆ ç±»å‹ç³»ç»Ÿæ€§èƒ½åˆ†æ](#-ç±»å‹ç³»ç»Ÿæ€§èƒ½åˆ†æ)
    - [ç±»å‹æ€§èƒ½åŸºå‡†æµ‹è¯•](#ç±»å‹æ€§èƒ½åŸºå‡†æµ‹è¯•)
  - [âš¡ ç±»å‹ç³»ç»Ÿä¼˜åŒ–ç­–ç•¥](#-ç±»å‹ç³»ç»Ÿä¼˜åŒ–ç­–ç•¥)
    - [1. ç±»å‹æ¨æ–­](#1-ç±»å‹æ¨æ–­)
    - [2. ç±»å‹è½¬æ¢](#2-ç±»å‹è½¬æ¢)
    - [3. ç±»å‹éªŒè¯](#3-ç±»å‹éªŒè¯)
  - [ğŸ’¡ å®æˆ˜æ¡ˆä¾‹](#-å®æˆ˜æ¡ˆä¾‹)
    - [æ¡ˆä¾‹1ï¼šç”µå•†ç³»ç»Ÿç±»å‹å®šä¹‰](#æ¡ˆä¾‹1ç”µå•†ç³»ç»Ÿç±»å‹å®šä¹‰)
    - [æ¡ˆä¾‹2ï¼šé‡‘èç³»ç»Ÿç±»å‹å®šä¹‰](#æ¡ˆä¾‹2é‡‘èç³»ç»Ÿç±»å‹å®šä¹‰)
  - [ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®](#-æ€§èƒ½ä¼˜åŒ–å»ºè®®)
    - [ç±»å‹ä¼˜åŒ–çŸ©é˜µ](#ç±»å‹ä¼˜åŒ–çŸ©é˜µ)
  - [ğŸ¯ æ€»ç»“](#-æ€»ç»“)

---

## ğŸ¯ æ‰§è¡Œæ‘˜è¦

### ç±»å‹ç³»ç»Ÿå…¨æ™¯

```text
ç±»å‹ç³»ç»Ÿå…¨æ™¯:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              OTLPç±»å‹ç³»ç»Ÿä½“ç³»                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  åŸºç¡€ç±»å‹                                      â”‚      â”‚
â”‚  â”‚  - String/Number/Boolean                      â”‚      â”‚
â”‚  â”‚  - Bytes/Array                                â”‚      â”‚
â”‚  â”‚  - Timestamp/Duration                        â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                         â”‚                               â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚         â”‚               â”‚               â”‚               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ å¤åˆç±»å‹    â”‚  â”‚ è¯­ä¹‰ç±»å‹    â”‚  â”‚ æ‰©å±•ç±»å‹    â”‚        â”‚
â”‚  â”‚ - KeyValue  â”‚  â”‚ - SpanKind  â”‚  â”‚ - è‡ªå®šä¹‰    â”‚        â”‚
â”‚  â”‚ - AnyValue  â”‚  â”‚ - StatusCodeâ”‚  â”‚ - ä¸šåŠ¡ç±»å‹  â”‚        â”‚
â”‚  â”‚ - Array     â”‚  â”‚ - Severity  â”‚  â”‚ - é¢†åŸŸç±»å‹  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  ç±»å‹ç‰¹æ€§                                      â”‚      â”‚
â”‚  â”‚  - ç±»å‹å®‰å…¨                                    â”‚      â”‚
â”‚  â”‚  - ç±»å‹æ¨æ–­                                    â”‚      â”‚
â”‚  â”‚  - ç±»å‹è½¬æ¢                                    â”‚      â”‚
â”‚  â”‚  - ç±»å‹éªŒè¯                                    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒæ´å¯Ÿ**ï¼š

1. **åŸºç¡€ç±»å‹**ï¼šString/Number/Boolean/Bytes
2. **å¤åˆç±»å‹**ï¼šKeyValue/AnyValue/Array
3. **è¯­ä¹‰ç±»å‹**ï¼šSpanKind/StatusCode/Severity
4. **ç±»å‹ç‰¹æ€§**ï¼šç±»å‹å®‰å…¨ + ç±»å‹æ¨æ–­ + ç±»å‹è½¬æ¢

---

## ğŸ“Š ç±»å‹ç³»ç»Ÿå…¨æ™¯

### ç±»å‹å±‚æ¬¡ç»“æ„

```text
ç±»å‹å±‚æ¬¡ç»“æ„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OTLPç±»å‹å±‚æ¬¡                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  AnyValue (é¡¶çº§ç±»å‹)                                    â”‚
â”‚  â”œâ”€â”€ StringValue                                        â”‚
â”‚  â”œâ”€â”€ BoolValue                                          â”‚
â”‚  â”œâ”€â”€ IntValue                                           â”‚
â”‚  â”œâ”€â”€ DoubleValue                                        â”‚
â”‚  â”œâ”€â”€ ArrayValue                                         â”‚
â”‚  â”‚   â””â”€â”€ AnyValue[]                                    â”‚
â”‚  â”œâ”€â”€ KvlistValue                                        â”‚
â”‚  â”‚   â””â”€â”€ KeyValue[]                                    â”‚
â”‚  â””â”€â”€ BytesValue                                         â”‚
â”‚                                                         â”‚
â”‚  KeyValue (é”®å€¼å¯¹)                                      â”‚
â”‚  â”œâ”€â”€ key: String                                        â”‚
â”‚  â””â”€â”€ value: AnyValue                                   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”¢ åŸºç¡€ç±»å‹ç³»ç»Ÿ

### Stringç±»å‹

```protobuf
// Stringç±»å‹å®šä¹‰
message StringValue {
  string value = 1;
}

// Stringç±»å‹ä½¿ç”¨
message Span {
  string name = 1;  // Stringç±»å‹
  repeated KeyValue attributes = 2;
}

message KeyValue {
  string key = 1;  // Stringç±»å‹
  AnyValue value = 2;
}
```

### Numberç±»å‹

```protobuf
// Numberç±»å‹å®šä¹‰
message IntValue {
  sfixed64 value = 1;
}

message DoubleValue {
  double value = 1;
}

// Numberç±»å‹ä½¿ç”¨
message MetricDataPoint {
  oneof value {
    double as_double = 4;  // Doubleç±»å‹
    sfixed64 as_int = 5;   // Intç±»å‹
  }
}
```

### Booleanç±»å‹

```protobuf
// Booleanç±»å‹å®šä¹‰
message BoolValue {
  bool value = 1;
}

// Booleanç±»å‹ä½¿ç”¨
message Span {
  bool is_remote = 1;  // Booleanç±»å‹
}
```

### Bytesç±»å‹

```protobuf
// Bytesç±»å‹å®šä¹‰
message BytesValue {
  bytes value = 1;
}

// Bytesç±»å‹ä½¿ç”¨
message Span {
  bytes trace_id = 1;      // Bytesç±»å‹ (128ä½)
  bytes span_id = 2;       // Bytesç±»å‹ (64ä½)
  bytes parent_span_id = 3; // Bytesç±»å‹ (64ä½)
}
```

---

## ğŸ“¦ å¤åˆç±»å‹ç³»ç»Ÿ

### KeyValueç±»å‹

```protobuf
// KeyValueç±»å‹å®šä¹‰
message KeyValue {
  string key = 1;
  AnyValue value = 2;
}

// KeyValueç±»å‹ä½¿ç”¨
message Span {
  repeated KeyValue attributes = 8;
}

message LogRecord {
  repeated KeyValue attributes = 6;
}

message MetricDataPoint {
  repeated KeyValue attributes = 1;
}
```

### AnyValueç±»å‹

```protobuf
// AnyValueç±»å‹å®šä¹‰
message AnyValue {
  oneof value {
    string string_value = 1;
    bool bool_value = 2;
    int64 int_value = 3;
    double double_value = 4;
    ArrayValue array_value = 5;
    KeyValueList kvlist_value = 6;
    bytes bytes_value = 7;
  }
}

// AnyValueç±»å‹ä½¿ç”¨
message KeyValue {
  string key = 1;
  AnyValue value = 2;  // AnyValueç±»å‹
}

message LogRecord {
  AnyValue body = 5;  // AnyValueç±»å‹
}
```

### Arrayç±»å‹

```protobuf
// Arrayç±»å‹å®šä¹‰
message ArrayValue {
  repeated AnyValue values = 1;
}

// Arrayç±»å‹ä½¿ç”¨
message Span {
  repeated Event events = 9;      // Arrayç±»å‹
  repeated Link links = 10;       // Arrayç±»å‹
  repeated KeyValue attributes = 8; // Arrayç±»å‹
}

message Metric {
  repeated MetricDataPoint data_points = 4; // Arrayç±»å‹
}
```

---

## ğŸ·ï¸ è¯­ä¹‰ç±»å‹ç³»ç»Ÿ

### SpanKindç±»å‹

```protobuf
// SpanKindç±»å‹å®šä¹‰
enum SpanKind {
  SPAN_KIND_UNSPECIFIED = 0;  // æœªæŒ‡å®š
  SPAN_KIND_INTERNAL = 1;     // å†…éƒ¨æ“ä½œ
  SPAN_KIND_SERVER = 2;        // æœåŠ¡ç«¯
  SPAN_KIND_CLIENT = 3;        // å®¢æˆ·ç«¯
  SPAN_KIND_PRODUCER = 4;      // ç”Ÿäº§è€…
  SPAN_KIND_CONSUMER = 5;      // æ¶ˆè´¹è€…
}

// SpanKindç±»å‹ä½¿ç”¨
message Span {
  SpanKind kind = 5;  // SpanKindç±»å‹
}
```

### StatusCodeç±»å‹

```protobuf
// StatusCodeç±»å‹å®šä¹‰
enum StatusCode {
  STATUS_CODE_UNSET = 0;  // æœªè®¾ç½®
  STATUS_CODE_OK = 1;     // æˆåŠŸ
  STATUS_CODE_ERROR = 2;  // é”™è¯¯
}

// StatusCodeç±»å‹ä½¿ç”¨
message Status {
  StatusCode code = 1;  // StatusCodeç±»å‹
  string message = 2;
}

message Span {
  Status status = 11;  // Statusç±»å‹
}
```

### SeverityNumberç±»å‹

```protobuf
// SeverityNumberç±»å‹å®šä¹‰
enum SeverityNumber {
  SEVERITY_NUMBER_UNSPECIFIED = 0;
  SEVERITY_NUMBER_TRACE = 1;
  SEVERITY_NUMBER_TRACE2 = 2;
  SEVERITY_NUMBER_TRACE3 = 3;
  SEVERITY_NUMBER_TRACE4 = 4;
  SEVERITY_NUMBER_DEBUG = 5;
  SEVERITY_NUMBER_DEBUG2 = 6;
  SEVERITY_NUMBER_DEBUG3 = 7;
  SEVERITY_NUMBER_DEBUG4 = 8;
  SEVERITY_NUMBER_INFO = 9;
  SEVERITY_NUMBER_INFO2 = 10;
  SEVERITY_NUMBER_INFO3 = 11;
  SEVERITY_NUMBER_INFO4 = 12;
  SEVERITY_NUMBER_WARN = 13;
  SEVERITY_NUMBER_WARN2 = 14;
  SEVERITY_NUMBER_WARN3 = 15;
  SEVERITY_NUMBER_WARN4 = 16;
  SEVERITY_NUMBER_ERROR = 17;
  SEVERITY_NUMBER_ERROR2 = 18;
  SEVERITY_NUMBER_ERROR3 = 19;
  SEVERITY_NUMBER_ERROR4 = 20;
  SEVERITY_NUMBER_FATAL = 21;
  SEVERITY_NUMBER_FATAL2 = 22;
  SEVERITY_NUMBER_FATAL3 = 23;
  SEVERITY_NUMBER_FATAL4 = 24;
}

// SeverityNumberç±»å‹ä½¿ç”¨
message LogRecord {
  SeverityNumber severity_number = 3;  // SeverityNumberç±»å‹
  string severity_text = 4;
}
```

---

## ğŸ“ˆ ç±»å‹ç³»ç»Ÿæ€§èƒ½åˆ†æ

### ç±»å‹æ€§èƒ½åŸºå‡†æµ‹è¯•

```text
ç±»å‹æ€§èƒ½åŸºå‡†æµ‹è¯• (100,000æ¬¡æ“ä½œ):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç±»å‹          â”‚ åºåˆ—åŒ–æ—¶é—´ â”‚ ååºåˆ—åŒ–æ—¶é—´ â”‚ ä½“ç§¯      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  String        â”‚ 5ms       â”‚ 8ms         â”‚ 16 bytes  â”‚
â”‚  Int64         â”‚ 3ms       â”‚ 4ms         â”‚ 8 bytes   â”‚
â”‚  Double        â”‚ 3ms       â”‚ 4ms         â”‚ 8 bytes   â”‚
â”‚  Bool          â”‚ 2ms       â”‚ 3ms         â”‚ 1 byte    â”‚
â”‚  Bytes         â”‚ 10ms      â”‚ 12ms        â”‚ å¯å˜      â”‚
â”‚  Array         â”‚ 15ms      â”‚ 20ms        â”‚ å¯å˜      â”‚
â”‚  KeyValue      â”‚ 8ms       â”‚ 12ms        â”‚ å¯å˜      â”‚
â”‚  AnyValue      â”‚ 10ms      â”‚ 15ms        â”‚ å¯å˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš¡ ç±»å‹ç³»ç»Ÿä¼˜åŒ–ç­–ç•¥

### 1. ç±»å‹æ¨æ–­

```go
// ç±»å‹æ¨æ–­ç¤ºä¾‹
package main

import (
    "go.opentelemetry.io/otel/attribute"
)

func inferType(value interface{}) attribute.KeyValue {
    switch v := value.(type) {
    case string:
        return attribute.String("key", v)
    case int:
        return attribute.Int("key", v)
    case int64:
        return attribute.Int64("key", v)
    case float64:
        return attribute.Float64("key", v)
    case bool:
        return attribute.Bool("key", v)
    default:
        return attribute.String("key", fmt.Sprintf("%v", v))
    }
}
```

### 2. ç±»å‹è½¬æ¢

```go
// ç±»å‹è½¬æ¢ç¤ºä¾‹
package main

import (
    "go.opentelemetry.io/proto/otlp/common/v1"
)

func convertToAnyValue(value interface{}) *common.AnyValue {
    switch v := value.(type) {
    case string:
        return &common.AnyValue{
            Value: &common.AnyValue_StringValue{
                StringValue: v,
            },
        }
    case int64:
        return &common.AnyValue{
            Value: &common.AnyValue_IntValue{
                IntValue: v,
            },
        }
    case float64:
        return &common.AnyValue{
            Value: &common.AnyValue_DoubleValue{
                DoubleValue: v,
            },
        }
    case bool:
        return &common.AnyValue{
            Value: &common.AnyValue_BoolValue{
                BoolValue: v,
            },
        }
    case []byte:
        return &common.AnyValue{
            Value: &common.AnyValue_BytesValue{
                BytesValue: v,
            },
        }
    default:
        return &common.AnyValue{
            Value: &common.AnyValue_StringValue{
                StringValue: fmt.Sprintf("%v", v),
            },
        }
    }
}
```

### 3. ç±»å‹éªŒè¯

```go
// ç±»å‹éªŒè¯ç¤ºä¾‹
package main

import (
    "go.opentelemetry.io/proto/otlp/common/v1"
)

func validateKeyValue(kv *common.KeyValue) error {
    // éªŒè¯key
    if kv.Key == "" {
        return errors.New("key cannot be empty")
    }

    if len(kv.Key) > 256 {
        return errors.New("key too long")
    }

    // éªŒè¯value
    if kv.Value == nil {
        return errors.New("value cannot be nil")
    }

    return nil
}

func validateSpan(span *trace.Span) error {
    // éªŒè¯trace_id
    if len(span.TraceId) != 16 {
        return errors.New("invalid trace_id length")
    }

    // éªŒè¯span_id
    if len(span.SpanId) != 8 {
        return errors.New("invalid span_id length")
    }

    // éªŒè¯æ—¶é—´
    if span.StartTimeUnixNano >= span.EndTimeUnixNano {
        return errors.New("invalid time range")
    }

    return nil
}
```

---

## ğŸ’¡ å®æˆ˜æ¡ˆä¾‹

### æ¡ˆä¾‹1ï¼šç”µå•†ç³»ç»Ÿç±»å‹å®šä¹‰

```go
// ç”µå•†ç³»ç»Ÿç±»å‹å®šä¹‰
package main

import (
    "go.opentelemetry.io/otel/attribute"
    "go.opentelemetry.io/otel/trace"
)

// è®¢å•ç±»å‹å®šä¹‰
type OrderAttributes struct {
    OrderID    string
    UserID     string
    ProductID  string
    Amount     float64
    Status     string
    CreatedAt  time.Time
}

// è½¬æ¢ä¸ºSpanå±æ€§
func (oa *OrderAttributes) ToSpanAttributes() []attribute.KeyValue {
    return []attribute.KeyValue{
        attribute.String("order.id", oa.OrderID),
        attribute.String("order.user_id", oa.UserID),
        attribute.String("order.product_id", oa.ProductID),
        attribute.Float64("order.amount", oa.Amount),
        attribute.String("order.status", oa.Status),
        attribute.String("order.created_at", oa.CreatedAt.Format(time.RFC3339)),
    }
}

// æ”¯ä»˜ç±»å‹å®šä¹‰
type PaymentAttributes struct {
    PaymentID string
    OrderID   string
    Amount    float64
    Method    string
    Status    string
}

// è½¬æ¢ä¸ºSpanå±æ€§
func (pa *PaymentAttributes) ToSpanAttributes() []attribute.KeyValue {
    return []attribute.KeyValue{
        attribute.String("payment.id", pa.PaymentID),
        attribute.String("payment.order_id", pa.OrderID),
        attribute.Float64("payment.amount", pa.Amount),
        attribute.String("payment.method", pa.Method),
        attribute.String("payment.status", pa.Status),
    }
}
```

### æ¡ˆä¾‹2ï¼šé‡‘èç³»ç»Ÿç±»å‹å®šä¹‰

```go
// é‡‘èç³»ç»Ÿç±»å‹å®šä¹‰
package main

import (
    "go.opentelemetry.io/otel/attribute"
)

// äº¤æ˜“ç±»å‹å®šä¹‰
type TransactionAttributes struct {
    TransactionID string
    AccountID     string
    Amount        float64
    Currency      string
    Type          string
    Status        string
}

// è½¬æ¢ä¸ºSpanå±æ€§
func (ta *TransactionAttributes) ToSpanAttributes() []attribute.KeyValue {
    return []attribute.KeyValue{
        attribute.String("transaction.id", ta.TransactionID),
        attribute.String("transaction.account_id", ta.AccountID),
        attribute.Float64("transaction.amount", ta.Amount),
        attribute.String("transaction.currency", ta.Currency),
        attribute.String("transaction.type", ta.Type),
        attribute.String("transaction.status", ta.Status),
    }
}

// é£æ§ç±»å‹å®šä¹‰
type RiskAttributes struct {
    RiskID     string
    UserID     string
    RiskLevel  string
    RiskScore  float64
    Reason     string
}

// è½¬æ¢ä¸ºSpanå±æ€§
func (ra *RiskAttributes) ToSpanAttributes() []attribute.KeyValue {
    return []attribute.KeyValue{
        attribute.String("risk.id", ra.RiskID),
        attribute.String("risk.user_id", ra.UserID),
        attribute.String("risk.level", ra.RiskLevel),
        attribute.Float64("risk.score", ra.RiskScore),
        attribute.String("risk.reason", ra.Reason),
    }
}
```

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®

### ç±»å‹ä¼˜åŒ–çŸ©é˜µ

```text
ç±»å‹ä¼˜åŒ–çŸ©é˜µ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¼˜åŒ–é¡¹          â”‚ ç­–ç•¥                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç±»å‹é€‰æ‹©        â”‚ ä¼˜å…ˆä½¿ç”¨æ•°å€¼ç±»å‹                      â”‚
â”‚  ç±»å‹æ¨æ–­        â”‚ è‡ªåŠ¨æ¨æ–­ç±»å‹                          â”‚
â”‚  ç±»å‹è½¬æ¢        â”‚ ç¼“å­˜è½¬æ¢ç»“æœ                          â”‚
â”‚  ç±»å‹éªŒè¯        â”‚ æå‰éªŒè¯ç±»å‹                          â”‚
â”‚  ç±»å‹å‹ç¼©        â”‚ ä½¿ç”¨æšä¸¾ç±»å‹                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ æ€»ç»“

**æ•°æ®å®šä¹‰ä¸ç±»å‹ç³»ç»Ÿ**æ˜¯OTLPè¯­ä¹‰æ¨¡å‹çš„åŸºç¡€ï¼š

1. **åŸºç¡€ç±»å‹**ï¼šString/Number/Boolean/Bytes
2. **å¤åˆç±»å‹**ï¼šKeyValue/AnyValue/Array
3. **è¯­ä¹‰ç±»å‹**ï¼šSpanKind/StatusCode/Severity
4. **ç±»å‹ç‰¹æ€§**ï¼šç±»å‹å®‰å…¨ + ç±»å‹æ¨æ–­ + ç±»å‹è½¬æ¢

**å…³é”®è¦ç‚¹**ï¼š

- âœ… åŸºç¡€ç±»å‹æä¾›åŸºæœ¬æ•°æ®ç±»å‹
- âœ… å¤åˆç±»å‹æ”¯æŒå¤æ‚æ•°æ®ç»“æ„
- âœ… è¯­ä¹‰ç±»å‹æä¾›é¢†åŸŸç‰¹å®šç±»å‹
- âœ… ç±»å‹æ¨æ–­ç®€åŒ–ä½¿ç”¨
- âœ… ç±»å‹éªŒè¯ä¿è¯æ•°æ®è´¨é‡

---

**æœ€åæ›´æ–°**: 2025å¹´10æœˆ11æ—¥
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0
**ç»´æŠ¤è€…**: OTLPæ·±åº¦æ¢³ç†å›¢é˜Ÿ
